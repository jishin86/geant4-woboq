<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>G4OpenGLSceneHandler.cc source code [codebrowser/source/visualization/OpenGL/src/G4OpenGLSceneHandler.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/source/visualization/OpenGL/src/G4OpenGLSceneHandler.cc'; var root_path = '../../../../..'; var data_path = '../../../../../../data';</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>codebrowser</a>/<a href='../../..'>source</a>/<a href='../..'>visualization</a>/<a href='..'>OpenGL</a>/<a href='./'>src</a>/<a href='G4OpenGLSceneHandler.cc.html'>G4OpenGLSceneHandler.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//</i></td></tr>
<tr><th id="2">2</th><td><i>// ********************************************************************</i></td></tr>
<tr><th id="3">3</th><td><i>// * License and Disclaimer                                           *</i></td></tr>
<tr><th id="4">4</th><td><i>// *                                                                  *</i></td></tr>
<tr><th id="5">5</th><td><i>// * The  Geant4 software  is  copyright of the Copyright Holders  of *</i></td></tr>
<tr><th id="6">6</th><td><i>// * the Geant4 Collaboration.  It is provided  under  the terms  and *</i></td></tr>
<tr><th id="7">7</th><td><i>// * conditions of the Geant4 Software License,  included in the file *</i></td></tr>
<tr><th id="8">8</th><td><i>// * LICENSE and available at  <a href="http://cern.ch/geant4/license">http://cern.ch/geant4/license</a> .  These *</i></td></tr>
<tr><th id="9">9</th><td><i>// * include a list of copyright holders.                             *</i></td></tr>
<tr><th id="10">10</th><td><i>// *                                                                  *</i></td></tr>
<tr><th id="11">11</th><td><i>// * Neither the authors of this software system, nor their employing *</i></td></tr>
<tr><th id="12">12</th><td><i>// * institutes,nor the agencies providing financial support for this *</i></td></tr>
<tr><th id="13">13</th><td><i>// * work  make  any representation or  warranty, express or implied, *</i></td></tr>
<tr><th id="14">14</th><td><i>// * regarding  this  software system or assume any liability for its *</i></td></tr>
<tr><th id="15">15</th><td><i>// * use.  Please see the license in the file  LICENSE  and URL above *</i></td></tr>
<tr><th id="16">16</th><td><i>// * for the full disclaimer and the limitation of liability.         *</i></td></tr>
<tr><th id="17">17</th><td><i>// *                                                                  *</i></td></tr>
<tr><th id="18">18</th><td><i>// * This  code  implementation is the result of  the  scientific and *</i></td></tr>
<tr><th id="19">19</th><td><i>// * technical work of the GEANT4 collaboration.                      *</i></td></tr>
<tr><th id="20">20</th><td><i>// * By using,  copying,  modifying or  distributing the software (or *</i></td></tr>
<tr><th id="21">21</th><td><i>// * any work based  on the software)  you  agree  to acknowledge its *</i></td></tr>
<tr><th id="22">22</th><td><i>// * use  in  resulting  scientific  publications,  and indicate your *</i></td></tr>
<tr><th id="23">23</th><td><i>// * acceptance of all terms of the Geant4 Software license.          *</i></td></tr>
<tr><th id="24">24</th><td><i>// ********************************************************************</i></td></tr>
<tr><th id="25">25</th><td><i>//</i></td></tr>
<tr><th id="26">26</th><td><i>//</i></td></tr>
<tr><th id="27">27</th><td><i>//</i></td></tr>
<tr><th id="28">28</th><td><i>// </i></td></tr>
<tr><th id="29">29</th><td><i>// Andrew Walkden  27th March 1996</i></td></tr>
<tr><th id="30">30</th><td><i>// OpenGL stored scene - creates OpenGL display lists.</i></td></tr>
<tr><th id="31">31</th><td><i>// OpenGL immediate scene - draws immediately to buffer</i></td></tr>
<tr><th id="32">32</th><td><i>//                           (saving space on server).</i></td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><u>#<span data-ppcond="34">ifdef</span> <span class="macro" data-ref="_M/G4VIS_BUILD_OPENGL_DRIVER">G4VIS_BUILD_OPENGL_DRIVER</span></u></td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../include/G4OpenGLSceneHandler.hh.html">"G4OpenGLSceneHandler.hh"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../include/G4OpenGLViewer.hh.html">"G4OpenGLViewer.hh"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../include/G4OpenGLTransform3D.hh.html">"G4OpenGLTransform3D.hh"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../../global/HEPGeometry/include/G4Point3D.hh.html">"G4Point3D.hh"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../global/HEPGeometry/include/G4Normal3D.hh.html">"G4Normal3D.hh"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../global/HEPGeometry/include/G4Transform3D.hh.html">"G4Transform3D.hh"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../../../graphics_reps/include/G4Polyline.hh.html">"G4Polyline.hh"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../../graphics_reps/include/G4Polymarker.hh.html">"G4Polymarker.hh"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../../graphics_reps/include/G4Text.hh.html">"G4Text.hh"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="../../../graphics_reps/include/G4Circle.hh.html">"G4Circle.hh"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../../graphics_reps/include/G4Square.hh.html">"G4Square.hh"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../../../graphics_reps/include/G4VMarker.hh.html">"G4VMarker.hh"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../../../graphics_reps/include/G4Polyhedron.hh.html">"G4Polyhedron.hh"</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../graphics_reps/include/G4VisAttributes.hh.html">"G4VisAttributes.hh"</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../../modeling/include/G4PhysicalVolumeModel.hh.html">"G4PhysicalVolumeModel.hh"</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../geometry/management/include/G4VPhysicalVolume.hh.html">"G4VPhysicalVolume.hh"</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="../../../geometry/management/include/G4LogicalVolume.hh.html">"G4LogicalVolume.hh"</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../../../geometry/management/include/G4VSolid.hh.html">"G4VSolid.hh"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../management/include/G4Scene.hh.html">"G4Scene.hh"</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../../../graphics_reps/include/G4VisExtent.hh.html">"G4VisExtent.hh"</a></u></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../../../graphics_reps/include/G4AttHolder.hh.html">"G4AttHolder.hh"</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../../../global/management/include/G4PhysicalConstants.hh.html">"G4PhysicalConstants.hh"</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="../../../run/include/G4RunManager.hh.html">"G4RunManager.hh"</a></u></td></tr>
<tr><th id="59">59</th><td><u>#<span data-ppcond="59">ifdef</span> <span class="macro" data-ref="_M/G4MULTITHREADED">G4MULTITHREADED</span></u></td></tr>
<tr><th id="60">60</th><td><u>#include <a href="../../../run/include/G4MTRunManager.hh.html">"G4MTRunManager.hh"</a></u></td></tr>
<tr><th id="61">61</th><td><u>#<span data-ppcond="59">endif</span></u></td></tr>
<tr><th id="62">62</th><td><u>#include <a href="../../../run/include/G4Run.hh.html">"G4Run.hh"</a></u></td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td><em>const</em> <span class='error' title="unknown type name &apos;GLubyte&apos;">GLubyte</span> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="tu decl def" id="G4OpenGLSceneHandler::fStippleMaskHashed" title='G4OpenGLSceneHandler::fStippleMaskHashed' data-type='const int [128]' data-ref="G4OpenGLSceneHandler::fStippleMaskHashed">fStippleMaskHashed</dfn> [<var>128</var>] = {</td></tr>
<tr><th id="65">65</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="66">66</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="67">67</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="68">68</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="69">69</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="70">70</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="71">71</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="72">72</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="73">73</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="74">74</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="75">75</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="76">76</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="77">77</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="78">78</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="79">79</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,</td></tr>
<tr><th id="80">80</th><td>  <var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var>,<var>0x55</var></td></tr>
<tr><th id="81">81</th><td>};</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="decl def" id="_ZN20G4OpenGLSceneHandlerC1ER17G4VGraphicsSystemiRK8G4String" title='G4OpenGLSceneHandler::G4OpenGLSceneHandler' data-ref="_ZN20G4OpenGLSceneHandlerC1ER17G4VGraphicsSystemiRK8G4String">G4OpenGLSceneHandler</dfn> (<a class="type" href="../../management/include/G4VSceneHandler.hh.html#G4VGraphicsSystem" title='G4VGraphicsSystem' data-ref="G4VGraphicsSystem">G4VGraphicsSystem</a>&amp; <dfn class="local col1 decl" id="1system" title='system' data-type='G4VGraphicsSystem &amp;' data-ref="1system">system</dfn>,</td></tr>
<tr><th id="84">84</th><td>                                            <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col2 decl" id="2id" title='id' data-type='G4int' data-ref="2id">id</dfn>,</td></tr>
<tr><th id="85">85</th><td>                                            <em>const</em> <a class="type" href="../../../global/management/include/G4String.hh.html#G4String" title='G4String' data-ref="G4String">G4String</a>&amp; <dfn class="local col3 decl" id="3name" title='name' data-type='const G4String &amp;' data-ref="3name">name</dfn>):</td></tr>
<tr><th id="86">86</th><td><a class="type" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler" title='G4VSceneHandler' data-ref="G4VSceneHandler">G4VSceneHandler</a> <a class="ref" href="../../management/include/G4VSceneHandler.hh.html#_ZN15G4VSceneHandlerC1ER17G4VGraphicsSystemiRK8G4String" title='G4VSceneHandler::G4VSceneHandler' data-ref="_ZN15G4VSceneHandlerC1ER17G4VGraphicsSystemiRK8G4String">(</a><a class="local col1 ref" href="#1system" title='system' data-ref="1system">system</a>, <a class="local col2 ref" href="#2id" title='id' data-ref="2id">id</a>, <a class="local col3 ref" href="#3name" title='name' data-ref="3name">name</a>),</td></tr>
<tr><th id="87">87</th><td><u>#<span data-ppcond="87">ifdef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="88">88</th><td>fEmulate_GL_QUADS(<b>false</b>),</td></tr>
<tr><th id="89">89</th><td><u>#<span data-ppcond="87">endif</span></u></td></tr>
<tr><th id="90">90</th><td>fPickName(<var>0</var>),</td></tr>
<tr><th id="91">91</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThreePassCapable" title='G4OpenGLSceneHandler::fThreePassCapable' data-ref="G4OpenGLSceneHandler::fThreePassCapable">fThreePassCapable</a>(<b>false</b>),</td></tr>
<tr><th id="92">92</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparencyRequested" title='G4OpenGLSceneHandler::fSecondPassForTransparencyRequested' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparencyRequested">fSecondPassForTransparencyRequested</a>(<b>false</b>),</td></tr>
<tr><th id="93">93</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparency" title='G4OpenGLSceneHandler::fSecondPassForTransparency' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparency">fSecondPassForTransparency</a>(<b>false</b>),</td></tr>
<tr><th id="94">94</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested">fThirdPassForNonHiddenMarkersRequested</a>(<b>false</b>),</td></tr>
<tr><th id="95">95</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers">fThirdPassForNonHiddenMarkers</a>(<b>false</b>),</td></tr>
<tr><th id="96">96</th><td><a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a>(<b>true</b>)</td></tr>
<tr><th id="97">97</th><td>{</td></tr>
<tr><th id="98">98</th><td>}</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>G4OpenGLSceneHandler::<span class='error' title="exception specification in declaration does not match previous declaration">~</span>G4OpenGLSceneHandler ()</td></tr>
<tr><th id="101">101</th><td>{</td></tr>
<tr><th id="102">102</th><td>  <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">ClearStore</span> ();</td></tr>
<tr><th id="103">103</th><td>}</td></tr>
<tr><th id="104">104</th><td></td></tr>
<tr><th id="105">105</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="decl def" id="_ZN20G4OpenGLSceneHandler19ClearAndDestroyAttsEv" title='G4OpenGLSceneHandler::ClearAndDestroyAtts' data-ref="_ZN20G4OpenGLSceneHandler19ClearAndDestroyAttsEv">ClearAndDestroyAtts</dfn>()</td></tr>
<tr><th id="106">106</th><td>{</td></tr>
<tr><th id="107">107</th><td>  <span class='error' title="use of undeclared identifier &apos;std&apos;">std</span>::map&lt;<span class='error' title="use of undeclared identifier &apos;GLuint&apos;">GLuint</span>, G4AttHolder*&gt;::iterator i;</td></tr>
<tr><th id="108">108</th><td>  <b>for</b> (<span class='error' title="use of undeclared identifier &apos;i&apos;">i</span> = <span class='error' title="use of undeclared identifier &apos;fPickMap&apos;">fPickMap</span>.begin(); <span class='error' title="use of undeclared identifier &apos;i&apos;">i</span> != <span class='error' title="use of undeclared identifier &apos;fPickMap&apos;">fPickMap</span>.end(); ++<span class='error' title="use of undeclared identifier &apos;i&apos;">i</span>) <b>delete</b> <span class='error' title="use of undeclared identifier &apos;i&apos;">i</span>-&gt;second;</td></tr>
<tr><th id="109">109</th><td>  <span class='error' title="use of undeclared identifier &apos;fPickMap&apos;">fPickMap</span>.clear();</td></tr>
<tr><th id="110">110</th><td>}</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td><a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="decl def" id="G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</dfn> = <var>100</var>;</td></tr>
<tr><th id="113">113</th><td><a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction" title='G4OpenGLSceneHandler::FlushAction' data-ref="G4OpenGLSceneHandler::FlushAction">FlushAction</a></td></tr>
<tr><th id="114">114</th><td><a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="decl def" id="G4OpenGLSceneHandler::fFlushAction" title='G4OpenGLSceneHandler::fFlushAction' data-ref="G4OpenGLSceneHandler::fFlushAction">fFlushAction</dfn> = <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::NthEvent" title='G4OpenGLSceneHandler::FlushAction::NthEvent' data-ref="G4OpenGLSceneHandler::FlushAction::NthEvent">NthEvent</a>;</td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="decl def" id="_ZN20G4OpenGLSceneHandler11ScaledFlushEv" title='G4OpenGLSceneHandler::ScaledFlush' data-ref="_ZN20G4OpenGLSceneHandler11ScaledFlushEv">ScaledFlush</dfn>()</td></tr>
<tr><th id="117">117</th><td>{</td></tr>
<tr><th id="118">118</th><td>  <b>if</b> (<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fReadyForTransients" title='G4VSceneHandler::fReadyForTransients' data-ref="G4VSceneHandler::fReadyForTransients">fReadyForTransients</a>) {</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td>    <i>// Drawing transients, e.g., trajectories.</i></td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>    <b>if</b> (!<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpScene" title='G4VSceneHandler::fpScene' data-ref="G4VSceneHandler::fpScene">fpScene</a>) {</td></tr>
<tr><th id="123">123</th><td>      <i>// No scene, so probably not in event loop.</i></td></tr>
<tr><th id="124">124</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="125">125</th><td>      <b>return</b>;</td></tr>
<tr><th id="126">126</th><td>    }</td></tr>
<tr><th id="127">127</th><td>    <i>// Get event from modeling parameters</i></td></tr>
<tr><th id="128">128</th><td>    <b>if</b> (!<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpModel" title='G4VSceneHandler::fpModel' data-ref="G4VSceneHandler::fpModel">fpModel</a>) {</td></tr>
<tr><th id="129">129</th><td>      <i>// No model, so probably not in event loop</i></td></tr>
<tr><th id="130">130</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="131">131</th><td>      <b>return</b>;</td></tr>
<tr><th id="132">132</th><td>    }</td></tr>
<tr><th id="133">133</th><td>    <em>const</em> <a class="type" href="../../modeling/include/G4ModelingParameters.hh.html#G4ModelingParameters" title='G4ModelingParameters' data-ref="G4ModelingParameters">G4ModelingParameters</a>* <dfn class="local col4 decl" id="4modelingParameters" title='modelingParameters' data-type='const G4ModelingParameters *' data-ref="4modelingParameters">modelingParameters</dfn> =</td></tr>
<tr><th id="134">134</th><td>    <a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpModel" title='G4VSceneHandler::fpModel' data-ref="G4VSceneHandler::fpModel">fpModel</a>-&gt;<a class="ref" href="../../modeling/include/G4VModel.hh.html#_ZNK8G4VModel21GetModelingParametersEv" title='G4VModel::GetModelingParameters' data-ref="_ZNK8G4VModel21GetModelingParametersEv">GetModelingParameters</a>();</td></tr>
<tr><th id="135">135</th><td>    <b>if</b> (!<a class="local col4 ref" href="#4modelingParameters" title='modelingParameters' data-ref="4modelingParameters">modelingParameters</a>) {</td></tr>
<tr><th id="136">136</th><td>      <i>// No modeling parameters, so probably not in event loop.</i></td></tr>
<tr><th id="137">137</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="138">138</th><td>      <b>return</b>;</td></tr>
<tr><th id="139">139</th><td>    }</td></tr>
<tr><th id="140">140</th><td>    <em>const</em> <a class="type" href="../../../event/include/G4Event.hh.html#G4Event" title='G4Event' data-ref="G4Event">G4Event</a>* <dfn class="local col5 decl" id="5thisEvent" title='thisEvent' data-type='const G4Event *' data-ref="5thisEvent">thisEvent</dfn> = <a class="local col4 ref" href="#4modelingParameters" title='modelingParameters' data-ref="4modelingParameters">modelingParameters</a>-&gt;<a class="ref" href="../../modeling/include/G4ModelingParameters.hh.html#_ZNK20G4ModelingParameters8GetEventEv" title='G4ModelingParameters::GetEvent' data-ref="_ZNK20G4ModelingParameters8GetEventEv">GetEvent</a>();</td></tr>
<tr><th id="141">141</th><td>    <b>if</b> (!<a class="local col5 ref" href="#5thisEvent" title='thisEvent' data-ref="5thisEvent">thisEvent</a>) {</td></tr>
<tr><th id="142">142</th><td>      <i>// No event, so probably not in event loop.</i></td></tr>
<tr><th id="143">143</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="144">144</th><td>      <b>return</b>;</td></tr>
<tr><th id="145">145</th><td>    }</td></tr>
<tr><th id="146">146</th><td>    <a class="type" href="../../../run/include/G4RunManager.hh.html#G4RunManager" title='G4RunManager' data-ref="G4RunManager">G4RunManager</a>* <dfn class="local col6 decl" id="6runMan" title='runMan' data-type='G4RunManager *' data-ref="6runMan">runMan</dfn> = <a class="type" href="../../../run/include/G4RunManager.hh.html#G4RunManager" title='G4RunManager' data-ref="G4RunManager">G4RunManager</a>::<a class="ref" href="../../../run/include/G4RunManager.hh.html#_ZN12G4RunManager13GetRunManagerEv" title='G4RunManager::GetRunManager' data-ref="_ZN12G4RunManager13GetRunManagerEv">GetRunManager</a>();</td></tr>
<tr><th id="147">147</th><td><u>#<span data-ppcond="147">ifdef</span> <span class="macro" data-ref="_M/G4MULTITHREADED">G4MULTITHREADED</span></u></td></tr>
<tr><th id="148">148</th><td>    <b>if</b> (<span class="namespace">G4Threading::</span><a class="ref" href="../../../global/management/include/G4Threading.hh.html#_ZN11G4Threading26IsMultithreadedApplicationEv" title='G4Threading::IsMultithreadedApplication' data-ref="_ZN11G4Threading26IsMultithreadedApplicationEv">IsMultithreadedApplication</a>()) {</td></tr>
<tr><th id="149">149</th><td>      runMan <span class='error' title="assigning to &apos;G4RunManager *&apos; from incompatible type &apos;G4MTRunManager *&apos;">=</span> G4MTRunManager::GetMasterRunManager();</td></tr>
<tr><th id="150">150</th><td>    }</td></tr>
<tr><th id="151">151</th><td><u>#<span data-ppcond="147">endif</span></u></td></tr>
<tr><th id="152">152</th><td>    <b>if</b> (!<a class="local col6 ref" href="#6runMan" title='runMan' data-ref="6runMan">runMan</a>) {</td></tr>
<tr><th id="153">153</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="154">154</th><td>      <b>return</b>;</td></tr>
<tr><th id="155">155</th><td>    }</td></tr>
<tr><th id="156">156</th><td>    <em>const</em> <a class="type" href="../../../run/include/G4Run.hh.html#G4Run" title='G4Run' data-ref="G4Run">G4Run</a>* <dfn class="local col7 decl" id="7thisRun" title='thisRun' data-type='const G4Run *' data-ref="7thisRun">thisRun</dfn> = <a class="local col6 ref" href="#6runMan" title='runMan' data-ref="6runMan">runMan</a>-&gt;<a class="ref" href="../../../run/include/G4RunManager.hh.html#_ZNK12G4RunManager13GetCurrentRunEv" title='G4RunManager::GetCurrentRun' data-ref="_ZNK12G4RunManager13GetCurrentRunEv">GetCurrentRun</a>();</td></tr>
<tr><th id="157">157</th><td>    <b>if</b> (!<a class="local col7 ref" href="#7thisRun" title='thisRun' data-ref="7thisRun">thisRun</a>) {</td></tr>
<tr><th id="158">158</th><td>      <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="159">159</th><td>      <b>return</b>;</td></tr>
<tr><th id="160">160</th><td>    }</td></tr>
<tr><th id="161">161</th><td></td></tr>
<tr><th id="162">162</th><td>    <b>switch</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fFlushAction" title='G4OpenGLSceneHandler::fFlushAction' data-ref="G4OpenGLSceneHandler::fFlushAction">fFlushAction</a>) {</td></tr>
<tr><th id="163">163</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::endOfEvent" title='G4OpenGLSceneHandler::FlushAction::endOfEvent' data-ref="G4OpenGLSceneHandler::FlushAction::endOfEvent">endOfEvent</a>:</td></tr>
<tr><th id="164">164</th><td>        <i>// If "/vis/scene/endOfEventAction refresh", primitives are flushed at</i></td></tr>
<tr><th id="165">165</th><td><i>        // end of run anyway, so only scale if false.</i></td></tr>
<tr><th id="166">166</th><td>        <b>if</b> (!<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpScene" title='G4VSceneHandler::fpScene' data-ref="G4VSceneHandler::fpScene">fpScene</a>-&gt;<a class="ref" href="../../management/include/G4Scene.hh.html#_ZNK7G4Scene22GetRefreshAtEndOfEventEv" title='G4Scene::GetRefreshAtEndOfEvent' data-ref="_ZNK7G4Scene22GetRefreshAtEndOfEventEv">GetRefreshAtEndOfEvent</a>()) {</td></tr>
<tr><th id="167">167</th><td>          <i>// But if "/vis/scene/endOfEventAction accumulate", ShowView is not</i></td></tr>
<tr><th id="168">168</th><td><i>          // called until end of run, so we have to watch for a new event.</i></td></tr>
<tr><th id="169">169</th><td><i>          // Get event from modeling parameters</i></td></tr>
<tr><th id="170">170</th><td>          <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col8 decl" id="8thisEventID" title='thisEventID' data-type='G4int' data-ref="8thisEventID">thisEventID</dfn> = <a class="local col5 ref" href="#5thisEvent" title='thisEvent' data-ref="5thisEvent">thisEvent</a>-&gt;<a class="ref" href="../../../event/include/G4Event.hh.html#_ZNK7G4Event10GetEventIDEv" title='G4Event::GetEventID' data-ref="_ZNK7G4Event10GetEventIDEv">GetEventID</a>();</td></tr>
<tr><th id="171">171</th><td>          <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col9 decl" id="9lastEventID" title='lastEventID' data-type='G4int' data-ref="9lastEventID">lastEventID</dfn> = <var>0</var>;</td></tr>
<tr><th id="172">172</th><td>          <b>if</b> (<a class="local col8 ref" href="#8thisEventID" title='thisEventID' data-ref="8thisEventID">thisEventID</a> != <a class="local col9 ref" href="#9lastEventID" title='lastEventID' data-ref="9lastEventID">lastEventID</a>) {</td></tr>
<tr><th id="173">173</th><td>            <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="174">174</th><td>            <a class="local col9 ref" href="#9lastEventID" title='lastEventID' data-ref="9lastEventID">lastEventID</a> = <a class="local col8 ref" href="#8thisEventID" title='thisEventID' data-ref="8thisEventID">thisEventID</a>;</td></tr>
<tr><th id="175">175</th><td>          }</td></tr>
<tr><th id="176">176</th><td>        }</td></tr>
<tr><th id="177">177</th><td>        <b>break</b>;</td></tr>
<tr><th id="178">178</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::endOfRun" title='G4OpenGLSceneHandler::FlushAction::endOfRun' data-ref="G4OpenGLSceneHandler::FlushAction::endOfRun">endOfRun</a>:</td></tr>
<tr><th id="179">179</th><td>        <i>// If "/vis/scene/endOfRunAction refresh", primitives are flushed at</i></td></tr>
<tr><th id="180">180</th><td><i>        // end of run anyway, so only scale if false.</i></td></tr>
<tr><th id="181">181</th><td>        <b>if</b> (!<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpScene" title='G4VSceneHandler::fpScene' data-ref="G4VSceneHandler::fpScene">fpScene</a>-&gt;<a class="ref" href="../../management/include/G4Scene.hh.html#_ZNK7G4Scene20GetRefreshAtEndOfRunEv" title='G4Scene::GetRefreshAtEndOfRun' data-ref="_ZNK7G4Scene20GetRefreshAtEndOfRunEv">GetRefreshAtEndOfRun</a>()) {</td></tr>
<tr><th id="182">182</th><td>          <i>// If "/vis/scene/endOfRunAction accumulate", ShowView is never called</i></td></tr>
<tr><th id="183">183</th><td><i>          // so we have to watch for a new run.</i></td></tr>
<tr><th id="184">184</th><td>          <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col0 decl" id="10thisRunID" title='thisRunID' data-type='G4int' data-ref="10thisRunID">thisRunID</dfn> = <a class="local col7 ref" href="#7thisRun" title='thisRun' data-ref="7thisRun">thisRun</a>-&gt;<a class="ref" href="../../../run/include/G4Run.hh.html#_ZNK5G4Run8GetRunIDEv" title='G4Run::GetRunID' data-ref="_ZNK5G4Run8GetRunIDEv">GetRunID</a>();</td></tr>
<tr><th id="185">185</th><td>          <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col1 decl" id="11lastRunID" title='lastRunID' data-type='G4int' data-ref="11lastRunID">lastRunID</dfn> = <var>0</var>;</td></tr>
<tr><th id="186">186</th><td>          <b>if</b> (<a class="local col0 ref" href="#10thisRunID" title='thisRunID' data-ref="10thisRunID">thisRunID</a> != <a class="local col1 ref" href="#11lastRunID" title='lastRunID' data-ref="11lastRunID">lastRunID</a>) {</td></tr>
<tr><th id="187">187</th><td>            <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="188">188</th><td>            <a class="local col1 ref" href="#11lastRunID" title='lastRunID' data-ref="11lastRunID">lastRunID</a> = <a class="local col0 ref" href="#10thisRunID" title='thisRunID' data-ref="10thisRunID">thisRunID</a>;</td></tr>
<tr><th id="189">189</th><td>          }</td></tr>
<tr><th id="190">190</th><td>        }</td></tr>
<tr><th id="191">191</th><td>        <b>break</b>;</td></tr>
<tr><th id="192">192</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::eachPrimitive" title='G4OpenGLSceneHandler::FlushAction::eachPrimitive' data-ref="G4OpenGLSceneHandler::FlushAction::eachPrimitive">eachPrimitive</a>:</td></tr>
<tr><th id="193">193</th><td>        <i>// This is equivalent to numeric with fEntitiesFlushInterval == 1.</i></td></tr>
<tr><th id="194">194</th><td>        <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</a> = <var>1</var>;  <i>// fallthrough</i></td></tr>
<tr><th id="195">195</th><td>        <i>// Fall through to NthPrimitive.</i></td></tr>
<tr><th id="196">196</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::NthPrimitive" title='G4OpenGLSceneHandler::FlushAction::NthPrimitive' data-ref="G4OpenGLSceneHandler::FlushAction::NthPrimitive">NthPrimitive</a>:</td></tr>
<tr><th id="197">197</th><td>      { <i>// Encapsulate in scope {} brackets to satisfy Windows.</i></td></tr>
<tr><th id="198">198</th><td>        <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col2 decl" id="12primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-type='G4int' data-ref="12primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</dfn> = <var>0</var>;</td></tr>
<tr><th id="199">199</th><td>        <a class="local col2 ref" href="#12primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="12primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a>++;</td></tr>
<tr><th id="200">200</th><td>        <b>if</b> (<a class="local col2 ref" href="#12primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="12primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a> &lt; <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</a>) <b>return</b>;</td></tr>
<tr><th id="201">201</th><td>        <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="202">202</th><td>        <a class="local col2 ref" href="#12primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="12primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a> = <var>0</var>;</td></tr>
<tr><th id="203">203</th><td>        <b>break</b>;</td></tr>
<tr><th id="204">204</th><td>      }</td></tr>
<tr><th id="205">205</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::NthEvent" title='G4OpenGLSceneHandler::FlushAction::NthEvent' data-ref="G4OpenGLSceneHandler::FlushAction::NthEvent">NthEvent</a>:</td></tr>
<tr><th id="206">206</th><td>        <i>// If "/vis/scene/endOfEventAction refresh", primitives are flushed at</i></td></tr>
<tr><th id="207">207</th><td><i>        // end of event anyway, so only scale if false.</i></td></tr>
<tr><th id="208">208</th><td>        <b>if</b> (!<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpScene" title='G4VSceneHandler::fpScene' data-ref="G4VSceneHandler::fpScene">fpScene</a>-&gt;<a class="ref" href="../../management/include/G4Scene.hh.html#_ZNK7G4Scene22GetRefreshAtEndOfEventEv" title='G4Scene::GetRefreshAtEndOfEvent' data-ref="_ZNK7G4Scene22GetRefreshAtEndOfEventEv">GetRefreshAtEndOfEvent</a>()) {</td></tr>
<tr><th id="209">209</th><td>          <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col3 decl" id="13thisEventID" title='thisEventID' data-type='G4int' data-ref="13thisEventID">thisEventID</dfn> = <a class="local col5 ref" href="#5thisEvent" title='thisEvent' data-ref="5thisEvent">thisEvent</a>-&gt;<a class="ref" href="../../../event/include/G4Event.hh.html#_ZNK7G4Event10GetEventIDEv" title='G4Event::GetEventID' data-ref="_ZNK7G4Event10GetEventIDEv">GetEventID</a>();</td></tr>
<tr><th id="210">210</th><td>          <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col4 decl" id="14lastEventID" title='lastEventID' data-type='G4int' data-ref="14lastEventID">lastEventID</dfn> = <var>0</var>;</td></tr>
<tr><th id="211">211</th><td>          <b>if</b> (<a class="local col3 ref" href="#13thisEventID" title='thisEventID' data-ref="13thisEventID">thisEventID</a> != <a class="local col4 ref" href="#14lastEventID" title='lastEventID' data-ref="14lastEventID">lastEventID</a>) {</td></tr>
<tr><th id="212">212</th><td>            <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col5 decl" id="15eventsWaitingToBeFlushed" title='eventsWaitingToBeFlushed' data-type='G4int' data-ref="15eventsWaitingToBeFlushed">eventsWaitingToBeFlushed</dfn> = <var>0</var>;</td></tr>
<tr><th id="213">213</th><td>            <a class="local col5 ref" href="#15eventsWaitingToBeFlushed" title='eventsWaitingToBeFlushed' data-ref="15eventsWaitingToBeFlushed">eventsWaitingToBeFlushed</a>++;</td></tr>
<tr><th id="214">214</th><td>            <b>if</b> (<a class="local col5 ref" href="#15eventsWaitingToBeFlushed" title='eventsWaitingToBeFlushed' data-ref="15eventsWaitingToBeFlushed">eventsWaitingToBeFlushed</a> &lt; <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</a>) <b>return</b>;</td></tr>
<tr><th id="215">215</th><td>            <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="216">216</th><td>            <a class="local col5 ref" href="#15eventsWaitingToBeFlushed" title='eventsWaitingToBeFlushed' data-ref="15eventsWaitingToBeFlushed">eventsWaitingToBeFlushed</a> = <var>0</var>;</td></tr>
<tr><th id="217">217</th><td>            <a class="local col4 ref" href="#14lastEventID" title='lastEventID' data-ref="14lastEventID">lastEventID</a> = <a class="local col3 ref" href="#13thisEventID" title='thisEventID' data-ref="13thisEventID">thisEventID</a>;</td></tr>
<tr><th id="218">218</th><td>          }</td></tr>
<tr><th id="219">219</th><td>        }</td></tr>
<tr><th id="220">220</th><td>        <b>break</b>;</td></tr>
<tr><th id="221">221</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::never" title='G4OpenGLSceneHandler::FlushAction::never' data-ref="G4OpenGLSceneHandler::FlushAction::never">never</a>:</td></tr>
<tr><th id="222">222</th><td>        <b>break</b>;</td></tr>
<tr><th id="223">223</th><td>      <b>default</b>:</td></tr>
<tr><th id="224">224</th><td>        <b>break</b>;</td></tr>
<tr><th id="225">225</th><td>    }</td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td>  }</td></tr>
<tr><th id="228">228</th><td></td></tr>
<tr><th id="229">229</th><td>  <b>else</b></td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>  {</td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td>    <i>// For run duration model drawing (detector drawing):</i></td></tr>
<tr><th id="234">234</th><td><i>    // Immediate mode: a huge speed up is obtained if flushes are scaled.</i></td></tr>
<tr><th id="235">235</th><td><i>    // Stored mode: no discernable difference since drawing is done to the</i></td></tr>
<tr><th id="236">236</th><td><i>    //   back buffer and then swapped.</i></td></tr>
<tr><th id="237">237</th><td><i>    // So eachPrimitive and NthPrimitive make sense.  But endOfEvent and</i></td></tr>
<tr><th id="238">238</th><td><i>    // endOfRun are treated as "no action", i.e., a flush will only be issued,</i></td></tr>
<tr><th id="239">239</th><td><i>    // as happens anyway, when drawing is complete.</i></td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>    <b>switch</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fFlushAction" title='G4OpenGLSceneHandler::fFlushAction' data-ref="G4OpenGLSceneHandler::fFlushAction">fFlushAction</a>) {</td></tr>
<tr><th id="242">242</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::endOfEvent" title='G4OpenGLSceneHandler::FlushAction::endOfEvent' data-ref="G4OpenGLSceneHandler::FlushAction::endOfEvent">endOfEvent</a>:</td></tr>
<tr><th id="243">243</th><td>        <b>break</b>;</td></tr>
<tr><th id="244">244</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::endOfRun" title='G4OpenGLSceneHandler::FlushAction::endOfRun' data-ref="G4OpenGLSceneHandler::FlushAction::endOfRun">endOfRun</a>:</td></tr>
<tr><th id="245">245</th><td>        <b>break</b>;</td></tr>
<tr><th id="246">246</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::eachPrimitive" title='G4OpenGLSceneHandler::FlushAction::eachPrimitive' data-ref="G4OpenGLSceneHandler::FlushAction::eachPrimitive">eachPrimitive</a>:</td></tr>
<tr><th id="247">247</th><td>        <i>// This is equivalent to NthPrimitive with fEntitiesFlushInterval == 1.</i></td></tr>
<tr><th id="248">248</th><td>        <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</a> = <var>1</var>;  <i>// fallthrough</i></td></tr>
<tr><th id="249">249</th><td>        <i>// Fall through to NthPrimitive.</i></td></tr>
<tr><th id="250">250</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::NthPrimitive" title='G4OpenGLSceneHandler::FlushAction::NthPrimitive' data-ref="G4OpenGLSceneHandler::FlushAction::NthPrimitive">NthPrimitive</a>:</td></tr>
<tr><th id="251">251</th><td>      { <i>// Encapsulate in scope {} brackets to satisfy Windows.</i></td></tr>
<tr><th id="252">252</th><td>        <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col6 decl" id="16primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-type='G4int' data-ref="16primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</dfn> = <var>0</var>;</td></tr>
<tr><th id="253">253</th><td>        <a class="local col6 ref" href="#16primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="16primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a>++;</td></tr>
<tr><th id="254">254</th><td>        <b>if</b> (<a class="local col6 ref" href="#16primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="16primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a> &lt; <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEntitiesFlushInterval" title='G4OpenGLSceneHandler::fEntitiesFlushInterval' data-ref="G4OpenGLSceneHandler::fEntitiesFlushInterval">fEntitiesFlushInterval</a>) <b>return</b>;</td></tr>
<tr><th id="255">255</th><td>        <span class='error' title="use of undeclared identifier &apos;glFlush&apos;">glFlush</span>();</td></tr>
<tr><th id="256">256</th><td>        <a class="local col6 ref" href="#16primitivesWaitingToBeFlushed" title='primitivesWaitingToBeFlushed' data-ref="16primitivesWaitingToBeFlushed">primitivesWaitingToBeFlushed</a> = <var>0</var>;</td></tr>
<tr><th id="257">257</th><td>        <b>break</b>;</td></tr>
<tr><th id="258">258</th><td>      }</td></tr>
<tr><th id="259">259</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::NthEvent" title='G4OpenGLSceneHandler::FlushAction::NthEvent' data-ref="G4OpenGLSceneHandler::FlushAction::NthEvent">NthEvent</a>:</td></tr>
<tr><th id="260">260</th><td>        <b>break</b>;</td></tr>
<tr><th id="261">261</th><td>      <b>case</b> <a class="enum" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::FlushAction::never" title='G4OpenGLSceneHandler::FlushAction::never' data-ref="G4OpenGLSceneHandler::FlushAction::never">never</a>:</td></tr>
<tr><th id="262">262</th><td>        <b>break</b>;</td></tr>
<tr><th id="263">263</th><td>      <b>default</b>:</td></tr>
<tr><th id="264">264</th><td>        <b>break</b>;</td></tr>
<tr><th id="265">265</th><td>    }</td></tr>
<tr><th id="266">266</th><td></td></tr>
<tr><th id="267">267</th><td>  }</td></tr>
<tr><th id="268">268</th><td>}</td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12ProcessSceneEv" title='G4OpenGLSceneHandler::ProcessScene' data-ref="_ZN20G4OpenGLSceneHandler12ProcessSceneEv">ProcessScene</dfn>()</td></tr>
<tr><th id="271">271</th><td>{</td></tr>
<tr><th id="272">272</th><td>  <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThreePassCapable" title='G4OpenGLSceneHandler::fThreePassCapable' data-ref="G4OpenGLSceneHandler::fThreePassCapable">fThreePassCapable</a> = <b>true</b>;</td></tr>
<tr><th id="273">273</th><td>  </td></tr>
<tr><th id="274">274</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">ProcessScene</span>();</td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td>  <i>// Repeat if required...</i></td></tr>
<tr><th id="277">277</th><td>  <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparencyRequested" title='G4OpenGLSceneHandler::fSecondPassForTransparencyRequested' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparencyRequested">fSecondPassForTransparencyRequested</a>) {</td></tr>
<tr><th id="278">278</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparency" title='G4OpenGLSceneHandler::fSecondPassForTransparency' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparency">fSecondPassForTransparency</a> = <b>true</b>;</td></tr>
<tr><th id="279">279</th><td>    G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">ProcessScene</span>();</td></tr>
<tr><th id="280">280</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparency" title='G4OpenGLSceneHandler::fSecondPassForTransparency' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparency">fSecondPassForTransparency</a> = <b>false</b>;</td></tr>
<tr><th id="281">281</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fSecondPassForTransparencyRequested" title='G4OpenGLSceneHandler::fSecondPassForTransparencyRequested' data-ref="G4OpenGLSceneHandler::fSecondPassForTransparencyRequested">fSecondPassForTransparencyRequested</a> = <b>false</b>;</td></tr>
<tr><th id="282">282</th><td>  }</td></tr>
<tr><th id="283">283</th><td></td></tr>
<tr><th id="284">284</th><td>  <i>// And again if required...</i></td></tr>
<tr><th id="285">285</th><td>  <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested">fThirdPassForNonHiddenMarkersRequested</a>) {</td></tr>
<tr><th id="286">286</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers">fThirdPassForNonHiddenMarkers</a> = <b>true</b>;</td></tr>
<tr><th id="287">287</th><td>    G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">ProcessScene</span>();</td></tr>
<tr><th id="288">288</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkers">fThirdPassForNonHiddenMarkers</a> = <b>false</b>;</td></tr>
<tr><th id="289">289</th><td>    <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested" title='G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested' data-ref="G4OpenGLSceneHandler::fThirdPassForNonHiddenMarkersRequested">fThirdPassForNonHiddenMarkersRequested</a> = <b>false</b>;</td></tr>
<tr><th id="290">290</th><td>  }</td></tr>
<tr><th id="291">291</th><td>  </td></tr>
<tr><th id="292">292</th><td>  <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fThreePassCapable" title='G4OpenGLSceneHandler::fThreePassCapable' data-ref="G4OpenGLSceneHandler::fThreePassCapable">fThreePassCapable</a> = <b>false</b>;</td></tr>
<tr><th id="293">293</th><td>}</td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11PreAddSolidERKN7HepGeom11Transform3DERK15G4VisAttributes" title='G4OpenGLSceneHandler::PreAddSolid' data-ref="_ZN20G4OpenGLSceneHandler11PreAddSolidERKN7HepGeom11Transform3DERK15G4VisAttributes">PreAddSolid</dfn></td></tr>
<tr><th id="296">296</th><td>(<em>const</em> <a class="typedef" href="../../../global/HEPGeometry/include/G4Transform3D.hh.html#G4Transform3D" title='G4Transform3D' data-type='HepGeom::Transform3D' data-ref="G4Transform3D">G4Transform3D</a>&amp; <dfn class="local col7 decl" id="17objectTransformation" title='objectTransformation' data-type='const G4Transform3D &amp;' data-ref="17objectTransformation">objectTransformation</dfn>,</td></tr>
<tr><th id="297">297</th><td> <em>const</em> <a class="type" href="../../../graphics_reps/include/G4VisAttributes.hh.html#G4VisAttributes" title='G4VisAttributes' data-ref="G4VisAttributes">G4VisAttributes</a>&amp; <dfn class="local col8 decl" id="18visAttribs" title='visAttribs' data-type='const G4VisAttributes &amp;' data-ref="18visAttribs">visAttribs</dfn>)</td></tr>
<tr><th id="298">298</th><td>{</td></tr>
<tr><th id="299">299</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">PreAddSolid</span> (objectTransformation, visAttribs);</td></tr>
<tr><th id="300">300</th><td>}</td></tr>
<tr><th id="301">301</th><td></td></tr>
<tr><th id="302">302</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler15BeginPrimitivesERKN7HepGeom11Transform3DE" title='G4OpenGLSceneHandler::BeginPrimitives' data-ref="_ZN20G4OpenGLSceneHandler15BeginPrimitivesERKN7HepGeom11Transform3DE">BeginPrimitives</dfn></td></tr>
<tr><th id="303">303</th><td>(<em>const</em> <a class="typedef" href="../../../global/HEPGeometry/include/G4Transform3D.hh.html#G4Transform3D" title='G4Transform3D' data-type='HepGeom::Transform3D' data-ref="G4Transform3D">G4Transform3D</a>&amp; <dfn class="local col9 decl" id="19objectTransformation" title='objectTransformation' data-type='const G4Transform3D &amp;' data-ref="19objectTransformation">objectTransformation</dfn>)</td></tr>
<tr><th id="304">304</th><td>{</td></tr>
<tr><th id="305">305</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">BeginPrimitives</span> (objectTransformation);</td></tr>
<tr><th id="306">306</th><td>}</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler13EndPrimitivesEv" title='G4OpenGLSceneHandler::EndPrimitives' data-ref="_ZN20G4OpenGLSceneHandler13EndPrimitivesEv">EndPrimitives</dfn> ()</td></tr>
<tr><th id="309">309</th><td>{</td></tr>
<tr><th id="310">310</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">EndPrimitives</span> ();</td></tr>
<tr><th id="311">311</th><td>}</td></tr>
<tr><th id="312">312</th><td></td></tr>
<tr><th id="313">313</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler17BeginPrimitives2DERKN7HepGeom11Transform3DE" title='G4OpenGLSceneHandler::BeginPrimitives2D' data-ref="_ZN20G4OpenGLSceneHandler17BeginPrimitives2DERKN7HepGeom11Transform3DE">BeginPrimitives2D</dfn></td></tr>
<tr><th id="314">314</th><td>(<em>const</em> <a class="typedef" href="../../../global/HEPGeometry/include/G4Transform3D.hh.html#G4Transform3D" title='G4Transform3D' data-type='HepGeom::Transform3D' data-ref="G4Transform3D">G4Transform3D</a>&amp; <dfn class="local col0 decl" id="20objectTransformation" title='objectTransformation' data-type='const G4Transform3D &amp;' data-ref="20objectTransformation">objectTransformation</dfn>)</td></tr>
<tr><th id="315">315</th><td>{</td></tr>
<tr><th id="316">316</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">BeginPrimitives2D</span> (objectTransformation);</td></tr>
<tr><th id="317">317</th><td>}</td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler15EndPrimitives2DEv" title='G4OpenGLSceneHandler::EndPrimitives2D' data-ref="_ZN20G4OpenGLSceneHandler15EndPrimitives2DEv">EndPrimitives2D</dfn> ()</td></tr>
<tr><th id="320">320</th><td>{</td></tr>
<tr><th id="321">321</th><td>  G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">EndPrimitives2D</span> ();</td></tr>
<tr><th id="322">322</th><td>}</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td><a class="type" href="../../../geometry/management/include/G4VSolid.hh.html#G4VSolid" title='G4VSolid' data-ref="G4VSolid">G4VSolid</a>* <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler18CreateSectionSolidEv" title='G4OpenGLSceneHandler::CreateSectionSolid' data-ref="_ZN20G4OpenGLSceneHandler18CreateSectionSolidEv">CreateSectionSolid</dfn> ()</td></tr>
<tr><th id="325">325</th><td>{</td></tr>
<tr><th id="326">326</th><td>  <b>return</b> G4VSceneHandler::<span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">CreateSectionSolid</span>();</td></tr>
<tr><th id="327">327</th><td>  <i>// If clipping done in G4OpenGLViewer::SetView</i></td></tr>
<tr><th id="328">328</th><td><i>  // return 0;</i></td></tr>
<tr><th id="329">329</th><td>}</td></tr>
<tr><th id="330">330</th><td></td></tr>
<tr><th id="331">331</th><td><a class="type" href="../../../geometry/management/include/G4VSolid.hh.html#G4VSolid" title='G4VSolid' data-ref="G4VSolid">G4VSolid</a>* <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler18CreateCutawaySolidEv" title='G4OpenGLSceneHandler::CreateCutawaySolid' data-ref="_ZN20G4OpenGLSceneHandler18CreateCutawaySolidEv">CreateCutawaySolid</dfn> ()</td></tr>
<tr><th id="332">332</th><td>{</td></tr>
<tr><th id="333">333</th><td>  <i>// Cutaway done in G4OpenGLViewer::SetView.</i></td></tr>
<tr><th id="334">334</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="335">335</th><td>  <i>// Else</i></td></tr>
<tr><th id="336">336</th><td><i>  // return G4VSceneHandler::CreateCutawaySolid();</i></td></tr>
<tr><th id="337">337</th><td>}</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK10G4Polyline" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK10G4Polyline">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Polyline.hh.html#G4Polyline" title='G4Polyline' data-ref="G4Polyline">G4Polyline</a>&amp; <dfn class="local col1 decl" id="21line" title='line' data-type='const G4Polyline &amp;' data-ref="21line">line</dfn>)</td></tr>
<tr><th id="340">340</th><td>{</td></tr>
<tr><th id="341">341</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col2 decl" id="22nPoints" title='nPoints' data-type='G4int' data-ref="22nPoints">nPoints</dfn> = line.<span class='error' title="no member named &apos;size&apos; in &apos;G4Polyline&apos;">size</span> ();</td></tr>
<tr><th id="342">342</th><td>  <b>if</b> (<a class="local col2 ref" href="#22nPoints" title='nPoints' data-ref="22nPoints">nPoints</a> &lt;= <var>0</var>) <b>return</b>;</td></tr>
<tr><th id="343">343</th><td></td></tr>
<tr><th id="344">344</th><td>  <i>// Note: colour and depth test treated in sub-class.</i></td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td><u>#<span data-ppcond="346">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="347">347</th><td>  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="348">348</th><td><u>#<span data-ppcond="346">endif</span></u></td></tr>
<tr><th id="349">349</th><td>  </td></tr>
<tr><th id="350">350</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col3 decl" id="23lineWidth" title='lineWidth' data-type='G4double' data-ref="23lineWidth">lineWidth</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetLineWidth</span>(fpVisAttribs);</td></tr>
<tr><th id="351">351</th><td>  <i>// Need access to method in G4OpenGLViewer.  static_cast doesn't</i></td></tr>
<tr><th id="352">352</th><td><i>  // work with a virtual base class, so use dynamic_cast.  No need to</i></td></tr>
<tr><th id="353">353</th><td><i>  // test the outcome since viewer is guaranteed to be a</i></td></tr>
<tr><th id="354">354</th><td><i>  // G4OpenGLViewer, but test it anyway to keep Coverity happy.</i></td></tr>
<tr><th id="355">355</th><td>  <a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>* <dfn class="local col4 decl" id="24pGLViewer" title='pGLViewer' data-type='G4OpenGLViewer *' data-ref="24pGLViewer">pGLViewer</dfn> = <b>dynamic_cast</b>&lt;<a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>*&gt;(<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a>);</td></tr>
<tr><th id="356">356</th><td>  <b>if</b> (<a class="local col4 ref" href="#24pGLViewer" title='pGLViewer' data-ref="24pGLViewer">pGLViewer</a>) <a class="local col4 ref" href="#24pGLViewer" title='pGLViewer' data-ref="24pGLViewer">pGLViewer</a>-&gt;<a class="ref" href="../include/G4OpenGLViewer.hh.html#_ZN14G4OpenGLViewer15ChangeLineWidthEd" title='G4OpenGLViewer::ChangeLineWidth' data-ref="_ZN14G4OpenGLViewer15ChangeLineWidthEd">ChangeLineWidth</a>(<a class="local col3 ref" href="#23lineWidth" title='lineWidth' data-ref="23lineWidth">lineWidth</a>);</td></tr>
<tr><th id="357">357</th><td></td></tr>
<tr><th id="358">358</th><td>  <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="359">359</th><td><u>#<span data-ppcond="359">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="360">360</th><td>  glBegin (<span class='error' title="use of undeclared identifier &apos;GL_LINE_STRIP&apos;">GL_LINE_STRIP</span>);</td></tr>
<tr><th id="361">361</th><td>  <i>// No ned glEdgeFlag for lines :</i></td></tr>
<tr><th id="362">362</th><td><i>  // Boundary and nonboundary edge flags on vertices are significant only if GL_POLYGON_MODE is set to GL_POINT or GL_LINE.  See glPolygonMode.</i></td></tr>
<tr><th id="363">363</th><td><i>  </i></td></tr>
<tr><th id="364">364</th><td><i>  //  glEdgeFlag (GL_TRUE);</i></td></tr>
<tr><th id="365">365</th><td>  <b>for</b> (<a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col5 decl" id="25iPoint" title='iPoint' data-type='G4int' data-ref="25iPoint">iPoint</dfn> = <var>0</var>; <a class="local col5 ref" href="#25iPoint" title='iPoint' data-ref="25iPoint">iPoint</a> &lt; <a class="local col2 ref" href="#22nPoints" title='nPoints' data-ref="22nPoints">nPoints</a>; <a class="local col5 ref" href="#25iPoint" title='iPoint' data-ref="25iPoint">iPoint</a>++) {</td></tr>
<tr><th id="366">366</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col6 decl" id="26x" title='x' data-type='G4double' data-ref="26x">x</dfn>, <dfn class="local col7 decl" id="27y" title='y' data-type='G4double' data-ref="27y">y</dfn>, <dfn class="local col8 decl" id="28z" title='z' data-type='G4double' data-ref="28z">z</dfn>;</td></tr>
<tr><th id="367">367</th><td>    x = line<span class='error' title="type &apos;const G4Polyline&apos; does not provide a subscript operator">[</span>iPoint].x(); </td></tr>
<tr><th id="368">368</th><td>    y = line<span class='error' title="type &apos;const G4Polyline&apos; does not provide a subscript operator">[</span>iPoint].y();</td></tr>
<tr><th id="369">369</th><td>    z = line<span class='error' title="type &apos;const G4Polyline&apos; does not provide a subscript operator">[</span>iPoint].z();</td></tr>
<tr><th id="370">370</th><td>    <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (x, y, z);</td></tr>
<tr><th id="371">371</th><td>  }</td></tr>
<tr><th id="372">372</th><td>  <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();</td></tr>
<tr><th id="373">373</th><td><u>#<span data-ppcond="359">else</span></u></td></tr>
<tr><th id="374">374</th><td>  glBeginVBO(GL_LINE_STRIP);</td></tr>
<tr><th id="375">375</th><td></td></tr>
<tr><th id="376">376</th><td>  <b>for</b> (G4int iPoint = <var>0</var>; iPoint &lt; nPoints; iPoint++) {</td></tr>
<tr><th id="377">377</th><td>    fOglVertex.push_back(line[iPoint].x());</td></tr>
<tr><th id="378">378</th><td>    fOglVertex.push_back(line[iPoint].y());</td></tr>
<tr><th id="379">379</th><td>    fOglVertex.push_back(line[iPoint].z());</td></tr>
<tr><th id="380">380</th><td>    <i>// normal</i></td></tr>
<tr><th id="381">381</th><td>    fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="382">382</th><td>    fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="383">383</th><td>    fOglVertex.push_back(<var>1</var>);</td></tr>
<tr><th id="384">384</th><td>  }</td></tr>
<tr><th id="385">385</th><td>  </td></tr>
<tr><th id="386">386</th><td>  glEndVBO();</td></tr>
<tr><th id="387">387</th><td><u>#<span data-ppcond="359">endif</span></u></td></tr>
<tr><th id="388">388</th><td>}</td></tr>
<tr><th id="389">389</th><td></td></tr>
<tr><th id="390">390</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>&amp; <dfn class="local col9 decl" id="29polymarker" title='polymarker' data-type='const G4Polymarker &amp;' data-ref="29polymarker">polymarker</dfn>)</td></tr>
<tr><th id="391">391</th><td>{</td></tr>
<tr><th id="392">392</th><td>  <b>if</b> (polymarker.<span class='error' title="no member named &apos;size&apos; in &apos;G4Polymarker&apos;">size</span>() == <var>0</var>) {</td></tr>
<tr><th id="393">393</th><td>    <b>return</b>;</td></tr>
<tr><th id="394">394</th><td>  }</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td>  <i>// Note: colour and depth test treated in sub-class.</i></td></tr>
<tr><th id="397">397</th><td></td></tr>
<tr><th id="398">398</th><td><u>#<span data-ppcond="398">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="399">399</th><td>  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="400">400</th><td><u>#<span data-ppcond="398">endif</span></u></td></tr>
<tr><th id="401">401</th><td>  </td></tr>
<tr><th id="402">402</th><td>  <a class="type" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::MarkerSizeType" title='G4VSceneHandler::MarkerSizeType' data-ref="G4VSceneHandler::MarkerSizeType">MarkerSizeType</a> <dfn class="local col0 decl" id="30sizeType" title='sizeType' data-type='G4VSceneHandler::MarkerSizeType' data-ref="30sizeType">sizeType</dfn>;</td></tr>
<tr><th id="403">403</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col1 decl" id="31size" title='size' data-type='G4double' data-ref="31size">size</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetMarkerSize</span>(polymarker, sizeType);</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td>  <i>// Need access to method in G4OpenGLViewer.  static_cast doesn't</i></td></tr>
<tr><th id="406">406</th><td><i>  // work with a virtual base class, so use dynamic_cast.  No need to</i></td></tr>
<tr><th id="407">407</th><td><i>  // test the outcome since viewer is guaranteed to be a</i></td></tr>
<tr><th id="408">408</th><td><i>  // G4OpenGLViewer, but test it anyway to keep Coverity happy.</i></td></tr>
<tr><th id="409">409</th><td>  <a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>* <dfn class="local col2 decl" id="32pGLViewer" title='pGLViewer' data-type='G4OpenGLViewer *' data-ref="32pGLViewer">pGLViewer</dfn> = <b>dynamic_cast</b>&lt;<a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>*&gt;(<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a>);</td></tr>
<tr><th id="410">410</th><td>  <b>if</b> (!<a class="local col2 ref" href="#32pGLViewer" title='pGLViewer' data-ref="32pGLViewer">pGLViewer</a>) <b>return</b>;</td></tr>
<tr><th id="411">411</th><td></td></tr>
<tr><th id="412">412</th><td>  <b>if</b> (<a class="local col0 ref" href="#30sizeType" title='sizeType' data-ref="30sizeType">sizeType</a> == <a class="enum" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::MarkerSizeType::world" title='G4VSceneHandler::MarkerSizeType::world' data-ref="G4VSceneHandler::MarkerSizeType::world">world</a>) {  <i>// Size specified in world coordinates.</i></td></tr>
<tr><th id="413">413</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col3 decl" id="33lineWidth" title='lineWidth' data-type='G4double' data-ref="33lineWidth">lineWidth</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetLineWidth</span>(fpVisAttribs);</td></tr>
<tr><th id="414">414</th><td>    <a class="local col2 ref" href="#32pGLViewer" title='pGLViewer' data-ref="32pGLViewer">pGLViewer</a>-&gt;<a class="ref" href="../include/G4OpenGLViewer.hh.html#_ZN14G4OpenGLViewer15ChangeLineWidthEd" title='G4OpenGLViewer::ChangeLineWidth' data-ref="_ZN14G4OpenGLViewer15ChangeLineWidthEd">ChangeLineWidth</a>(<a class="local col3 ref" href="#33lineWidth" title='lineWidth' data-ref="33lineWidth">lineWidth</a>);</td></tr>
<tr><th id="415">415</th><td>  </td></tr>
<tr><th id="416">416</th><td>    <a class="type" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker" title='G4VMarker' data-ref="G4VMarker">G4VMarker</a>::<a class="type" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker::FillStyle" title='G4VMarker::FillStyle' data-ref="G4VMarker::FillStyle">FillStyle</a> <dfn class="local col4 decl" id="34style" title='style' data-type='G4VMarker::FillStyle' data-ref="34style">style</dfn> = <a class="local col9 ref" href="#29polymarker" title='polymarker' data-ref="29polymarker">polymarker</a>.<a class="ref" href="../../../graphics_reps/include/G4VMarker.hh.html#_ZNK9G4VMarker12GetFillStyleEv" title='G4VMarker::GetFillStyle' data-ref="_ZNK9G4VMarker12GetFillStyleEv">GetFillStyle</a>();</td></tr>
<tr><th id="417">417</th><td>    </td></tr>
<tr><th id="418">418</th><td>    <i>// G4bool filled = false;  Not actually used - comment out to prevent compiler warnings (JA).</i></td></tr>
<tr><th id="419">419</th><td>    <em>static</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4bool" title='G4bool' data-type='bool' data-ref="G4bool">G4bool</a> <dfn class="local col5 decl" id="35hashedWarned" title='hashedWarned' data-type='G4bool' data-ref="35hashedWarned">hashedWarned</dfn> = <b>false</b>;</td></tr>
<tr><th id="420">420</th><td>    </td></tr>
<tr><th id="421">421</th><td>    <b>switch</b> (<a class="local col4 ref" href="#34style" title='style' data-ref="34style">style</a>) {</td></tr>
<tr><th id="422">422</th><td>      <b>case</b> <a class="type" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker" title='G4VMarker' data-ref="G4VMarker">G4VMarker</a>::<a class="enum" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker::FillStyle::noFill" title='G4VMarker::FillStyle::noFill' data-ref="G4VMarker::FillStyle::noFill">noFill</a>:</td></tr>
<tr><th id="423">423</th><td>        glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="424">424</th><td>        glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="425">425</th><td>        <i>//filled = false;</i></td></tr>
<tr><th id="426">426</th><td>        <b>break</b>;</td></tr>
<tr><th id="427">427</th><td>      <b>case</b> <a class="type" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker" title='G4VMarker' data-ref="G4VMarker">G4VMarker</a>::<a class="enum" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker::FillStyle::hashed" title='G4VMarker::FillStyle::hashed' data-ref="G4VMarker::FillStyle::hashed">hashed</a>:</td></tr>
<tr><th id="428">428</th><td>        <b>if</b> (!<a class="local col5 ref" href="#35hashedWarned" title='hashedWarned' data-ref="35hashedWarned">hashedWarned</a>) {  <i>// fallthrough</i></td></tr>
<tr><th id="429">429</th><td>          <a class="macro" href="../../../global/management/include/G4ios.hh.html#46" title="(*_G4cout_p())" data-ref="_M/G4cout">G4cout</a> <span class='error' title="invalid operands to binary expression (&apos;int&apos; and &apos;const char *&apos;)">&lt;&lt;</span> <q>"Hashed fill style in G4OpenGLSceneHandler."</q></td></tr>
<tr><th id="430">430</th><td>          &lt;&lt; <q>"\n  Not implemented.  Using G4VMarker::filled."</q></td></tr>
<tr><th id="431">431</th><td>          &lt;&lt; <a class="macro" href="../../../global/management/include/G4ios.hh.html#60" title="std::endl" data-ref="_M/G4endl">G4endl</a>;</td></tr>
<tr><th id="432">432</th><td>          <a class="local col5 ref" href="#35hashedWarned" title='hashedWarned' data-ref="35hashedWarned">hashedWarned</a> = <b>true</b>;</td></tr>
<tr><th id="433">433</th><td>        }  <i>// fallthrough</i></td></tr>
<tr><th id="434">434</th><td>        <i>// Maybe use</i></td></tr>
<tr><th id="435">435</th><td><i>        //glPolygonStipple (fStippleMaskHashed);</i></td></tr>
<tr><th id="436">436</th><td><i>        // Drop through to filled...</i></td></tr>
<tr><th id="437">437</th><td>      <b>case</b> <a class="type" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker" title='G4VMarker' data-ref="G4VMarker">G4VMarker</a>::<a class="enum" href="../../../graphics_reps/include/G4VMarker.hh.html#G4VMarker::FillStyle::filled" title='G4VMarker::FillStyle::filled' data-ref="G4VMarker::FillStyle::filled">filled</a>:</td></tr>
<tr><th id="438">438</th><td>        glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="439">439</th><td>        <i>//filled = true;</i></td></tr>
<tr><th id="440">440</th><td>        <b>break</b>;</td></tr>
<tr><th id="441">441</th><td>    }</td></tr>
<tr><th id="442">442</th><td>  }</td></tr>
<tr><th id="443">443</th><td>  </td></tr>
<tr><th id="444">444</th><td>  <i>// Draw...</i></td></tr>
<tr><th id="445">445</th><td>  <b>if</b> (<a class="local col0 ref" href="#30sizeType" title='sizeType' data-ref="30sizeType">sizeType</a> == <a class="enum" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::MarkerSizeType::world" title='G4VSceneHandler::MarkerSizeType::world' data-ref="G4VSceneHandler::MarkerSizeType::world">world</a>) {  <i>// Size specified in world coordinates.</i></td></tr>
<tr><th id="446">446</th><td></td></tr>
<tr><th id="447">447</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col6 decl" id="36nSides" title='nSides' data-type='G4int' data-ref="36nSides">nSides</dfn>;</td></tr>
<tr><th id="448">448</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col7 decl" id="37startPhi" title='startPhi' data-type='G4double' data-ref="37startPhi">startPhi</dfn>;</td></tr>
<tr><th id="449">449</th><td>    <b>switch</b> (<a class="local col9 ref" href="#29polymarker" title='polymarker' data-ref="29polymarker">polymarker</a>.<a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZNK12G4Polymarker13GetMarkerTypeEv" title='G4Polymarker::GetMarkerType' data-ref="_ZNK12G4Polymarker13GetMarkerTypeEv">GetMarkerType</a>()) {</td></tr>
<tr><th id="450">450</th><td>    <b>default</b>:</td></tr>
<tr><th id="451">451</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::dots" title='G4Polymarker::MarkerType::dots' data-ref="G4Polymarker::MarkerType::dots">dots</a>:</td></tr>
<tr><th id="452">452</th><td>        <a class="local col1 ref" href="#31size" title='size' data-ref="31size">size</a> = <var>1.</var>;  <i>// fallthrough</i></td></tr>
<tr><th id="453">453</th><td>      <i>// Drop through to circles</i></td></tr>
<tr><th id="454">454</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::circles" title='G4Polymarker::MarkerType::circles' data-ref="G4Polymarker::MarkerType::circles">circles</a>:</td></tr>
<tr><th id="455">455</th><td>      nSides = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetNoOfSides</span>(fpVisAttribs);</td></tr>
<tr><th id="456">456</th><td>      <a class="local col7 ref" href="#37startPhi" title='startPhi' data-ref="37startPhi">startPhi</a> = <var>0.</var>;</td></tr>
<tr><th id="457">457</th><td>      <b>break</b>;</td></tr>
<tr><th id="458">458</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::squares" title='G4Polymarker::MarkerType::squares' data-ref="G4Polymarker::MarkerType::squares">squares</a>:</td></tr>
<tr><th id="459">459</th><td>      <a class="local col6 ref" href="#36nSides" title='nSides' data-ref="36nSides">nSides</a> = <var>4</var>;</td></tr>
<tr><th id="460">460</th><td>      <a class="local col7 ref" href="#37startPhi" title='startPhi' data-ref="37startPhi">startPhi</a> = -<a class="ref" href="../../../externals/clhep/include/CLHEP/Units/SystemOfUnits.h.html#CLHEP::pi" title='CLHEP::pi' data-ref="CLHEP::pi">pi</a> / <var>4.</var>;</td></tr>
<tr><th id="461">461</th><td>      <b>break</b>;</td></tr>
<tr><th id="462">462</th><td>    }</td></tr>
<tr><th id="463">463</th><td></td></tr>
<tr><th id="464">464</th><td>    <em>const</em> <a class="typedef" href="../../../global/HEPGeometry/include/G4Vector3D.hh.html#G4Vector3D" title='G4Vector3D' data-type='HepGeom::Vector3D&lt;G4double&gt;' data-ref="G4Vector3D">G4Vector3D</a>&amp; <dfn class="local col8 decl" id="38viewpointDirection" title='viewpointDirection' data-type='const G4Vector3D &amp;' data-ref="38viewpointDirection">viewpointDirection</dfn> =</td></tr>
<tr><th id="465">465</th><td>      <a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a> -&gt; <a class="ref" href="../../management/include/G4VViewer.hh.html#_ZNK9G4VViewer17GetViewParametersEv" title='G4VViewer::GetViewParameters' data-ref="_ZNK9G4VViewer17GetViewParametersEv">GetViewParameters</a>().<a class="ref" href="../../management/include/G4ViewParameters.hh.html#_ZNK16G4ViewParameters21GetViewpointDirectionEv" title='G4ViewParameters::GetViewpointDirection' data-ref="_ZNK16G4ViewParameters21GetViewpointDirectionEv">GetViewpointDirection</a>();</td></tr>
<tr><th id="466">466</th><td>    <em>const</em> <a class="typedef" href="../../../global/HEPGeometry/include/G4Vector3D.hh.html#G4Vector3D" title='G4Vector3D' data-type='HepGeom::Vector3D&lt;G4double&gt;' data-ref="G4Vector3D">G4Vector3D</a>&amp; <dfn class="local col9 decl" id="39up" title='up' data-type='const G4Vector3D &amp;' data-ref="39up">up</dfn> = <a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a>-&gt;<a class="ref" href="../../management/include/G4VViewer.hh.html#_ZNK9G4VViewer17GetViewParametersEv" title='G4VViewer::GetViewParameters' data-ref="_ZNK9G4VViewer17GetViewParametersEv">GetViewParameters</a>().<a class="ref" href="../../management/include/G4ViewParameters.hh.html#_ZNK16G4ViewParameters11GetUpVectorEv" title='G4ViewParameters::GetUpVector' data-ref="_ZNK16G4ViewParameters11GetUpVectorEv">GetUpVector</a>();</td></tr>
<tr><th id="467">467</th><td>    <em>const</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col0 decl" id="40dPhi" title='dPhi' data-type='const G4double' data-ref="40dPhi">dPhi</dfn> = <a class="ref" href="../../../externals/clhep/include/CLHEP/Units/SystemOfUnits.h.html#CLHEP::twopi" title='CLHEP::twopi' data-ref="CLHEP::twopi">twopi</a> / <a class="local col6 ref" href="#36nSides" title='nSides' data-ref="36nSides">nSides</a>;</td></tr>
<tr><th id="468">468</th><td>    <em>const</em> <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col1 decl" id="41radius" title='radius' data-type='const G4double' data-ref="41radius">radius</dfn> = <a class="local col1 ref" href="#31size" title='size' data-ref="31size">size</a> / <var>2.</var>;</td></tr>
<tr><th id="469">469</th><td>    <a class="typedef" href="../../../global/HEPGeometry/include/G4Vector3D.hh.html#G4Vector3D" title='G4Vector3D' data-type='HepGeom::Vector3D&lt;G4double&gt;' data-ref="G4Vector3D">G4Vector3D</a> <dfn class="local col2 decl" id="42start" title='start' data-type='G4Vector3D' data-ref="42start">start</dfn> = <a class="ref fake" href="../../../externals/clhep/include/CLHEP/Geometry/Vector3D.h.html#_ZN7HepGeom8Vector3DIdEC1ERKNS_13BasicVector3DIdEE" title='HepGeom::Vector3D&lt;double&gt;::Vector3D' data-ref="_ZN7HepGeom8Vector3DIdEC1ERKNS_13BasicVector3DIdEE"></a><a class="local col1 ref" href="#41radius" title='radius' data-ref="41radius">radius</a> <a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/BasicVector3D.h.html#_ZN7HepGeommlEdRKNS_13BasicVector3DIdEE" title='HepGeom::operator*' data-ref="_ZN7HepGeommlEdRKNS_13BasicVector3DIdEE">*</a> (<a class="local col9 ref" href="#39up" title='up' data-ref="39up">up</a>.<a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/BasicVector3D.h.html#_ZNK7HepGeom13BasicVector3D5crossERKNS_13BasicVector3DIT_EE" title='HepGeom::BasicVector3D::cross' data-ref="_ZNK7HepGeom13BasicVector3D5crossERKNS_13BasicVector3DIT_EE">cross</a>(<a class="local col8 ref" href="#38viewpointDirection" title='viewpointDirection' data-ref="38viewpointDirection">viewpointDirection</a>)).<a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/BasicVector3D.h.html#_ZNK7HepGeom13BasicVector3D4unitEv" title='HepGeom::BasicVector3D::unit' data-ref="_ZNK7HepGeom13BasicVector3D4unitEv">unit</a>();</td></tr>
<tr><th id="470">470</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col3 decl" id="43phi" title='phi' data-type='G4double' data-ref="43phi">phi</dfn>;</td></tr>
<tr><th id="471">471</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col4 decl" id="44i" title='i' data-type='G4int' data-ref="44i">i</dfn>;</td></tr>
<tr><th id="472">472</th><td>    <b>for</b> (<span class='error' title="unknown type name &apos;size_t&apos;">size_t</span> <dfn class="local col5 decl" id="45iPoint" title='iPoint' data-type='int' data-ref="45iPoint">iPoint</dfn> = <var>0</var>; iPoint &lt; polymarker.<span class='error' title="no member named &apos;size&apos; in &apos;G4Polymarker&apos;">size</span> (); iPoint++) {</td></tr>
<tr><th id="473">473</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="474">474</th><td><u>#<span data-ppcond="474">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="475">475</th><td>      glBegin (<span class='error' title="use of undeclared identifier &apos;GL_POLYGON&apos;">GL_POLYGON</span>);</td></tr>
<tr><th id="476">476</th><td>      <b>for</b> (<a class="local col4 ref" href="#44i" title='i' data-ref="44i">i</a> = <var>0</var>, <a class="local col3 ref" href="#43phi" title='phi' data-ref="43phi">phi</a> = <a class="local col7 ref" href="#37startPhi" title='startPhi' data-ref="37startPhi">startPhi</a>; <a class="local col4 ref" href="#44i" title='i' data-ref="44i">i</a> &lt; <a class="local col6 ref" href="#36nSides" title='nSides' data-ref="36nSides">nSides</a>; <a class="local col4 ref" href="#44i" title='i' data-ref="44i">i</a>++, <a class="local col3 ref" href="#43phi" title='phi' data-ref="43phi">phi</a> += <a class="local col0 ref" href="#40dPhi" title='dPhi' data-ref="40dPhi">dPhi</a>) {</td></tr>
<tr><th id="477">477</th><td>	<a class="typedef" href="../../../global/HEPGeometry/include/G4Vector3D.hh.html#G4Vector3D" title='G4Vector3D' data-type='HepGeom::Vector3D&lt;G4double&gt;' data-ref="G4Vector3D">G4Vector3D</a> <dfn class="local col6 decl" id="46r" title='r' data-type='G4Vector3D' data-ref="46r">r</dfn> = <a class="ref fake" href="../../../externals/clhep/include/CLHEP/Geometry/Vector3D.h.html#_ZN7HepGeom8Vector3DIdEC1ERKS1_" title='HepGeom::Vector3D&lt;double&gt;::Vector3D' data-ref="_ZN7HepGeom8Vector3DIdEC1ERKS1_"></a><a class="local col2 ref" href="#42start" title='start' data-ref="42start">start</a>; <a class="local col6 ref" href="#46r" title='r' data-ref="46r">r</a>.<a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/BasicVector3D.h.html#_ZN7HepGeom13BasicVector3D6rotateET_RKNS_13BasicVector3DIS1_EE" title='HepGeom::BasicVector3D::rotate' data-ref="_ZN7HepGeom13BasicVector3D6rotateET_RKNS_13BasicVector3DIS1_EE">rotate</a>(<a class="local col3 ref" href="#43phi" title='phi' data-ref="43phi">phi</a>, <a class="local col8 ref" href="#38viewpointDirection" title='viewpointDirection' data-ref="38viewpointDirection">viewpointDirection</a>);</td></tr>
<tr><th id="478">478</th><td>	<a class="typedef" href="../../../global/HEPGeometry/include/G4Vector3D.hh.html#G4Vector3D" title='G4Vector3D' data-type='HepGeom::Vector3D&lt;G4double&gt;' data-ref="G4Vector3D">G4Vector3D</a> <dfn class="local col7 decl" id="47p" title='p' data-type='G4Vector3D' data-ref="47p">p</dfn> = polymarker[iPoint] + r;</td></tr>
<tr><th id="479">479</th><td>	<span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (p.x(), p.y(), p.z());</td></tr>
<tr><th id="480">480</th><td>      }</td></tr>
<tr><th id="481">481</th><td>      <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();</td></tr>
<tr><th id="482">482</th><td><u>#<span data-ppcond="474">else</span></u></td></tr>
<tr><th id="483">483</th><td>      glBeginVBO (GL_TRIANGLE_STRIP);</td></tr>
<tr><th id="484">484</th><td>      <b>for</b> (i = <var>0</var>, phi = startPhi; i &lt; nSides; i++, phi += dPhi) {</td></tr>
<tr><th id="485">485</th><td>        G4Vector3D r = start; r.rotate(phi, viewpointDirection);</td></tr>
<tr><th id="486">486</th><td>        G4Vector3D p = polymarker[iPoint] + r;</td></tr>
<tr><th id="487">487</th><td></td></tr>
<tr><th id="488">488</th><td>        fOglVertex.push_back(p.x());</td></tr>
<tr><th id="489">489</th><td>        fOglVertex.push_back(p.y());</td></tr>
<tr><th id="490">490</th><td>        fOglVertex.push_back(p.z());</td></tr>
<tr><th id="491">491</th><td>        <i>// normal</i></td></tr>
<tr><th id="492">492</th><td>        fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="493">493</th><td>        fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="494">494</th><td>        fOglVertex.push_back(<var>1</var>);</td></tr>
<tr><th id="495">495</th><td>      }</td></tr>
<tr><th id="496">496</th><td>      glEndVBO ();</td></tr>
<tr><th id="497">497</th><td><u>#<span data-ppcond="474">endif</span></u></td></tr>
<tr><th id="498">498</th><td>    }</td></tr>
<tr><th id="499">499</th><td></td></tr>
<tr><th id="500">500</th><td>  } <b>else</b> { <i>// Size specified in screen (window) coordinates.</i></td></tr>
<tr><th id="501">501</th><td></td></tr>
<tr><th id="502">502</th><td>    <a class="local col2 ref" href="#32pGLViewer" title='pGLViewer' data-ref="32pGLViewer">pGLViewer</a>-&gt;<a class="ref" href="../include/G4OpenGLViewer.hh.html#_ZN14G4OpenGLViewer15ChangePointSizeEd" title='G4OpenGLViewer::ChangePointSize' data-ref="_ZN14G4OpenGLViewer15ChangePointSizeEd">ChangePointSize</a>(<a class="local col1 ref" href="#31size" title='size' data-ref="31size">size</a>);</td></tr>
<tr><th id="503">503</th><td></td></tr>
<tr><th id="504">504</th><td>    <i>//Antialiasing only for circles</i></td></tr>
<tr><th id="505">505</th><td><u>#<span data-ppcond="505">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="506">506</th><td>    <b>switch</b> (<a class="local col9 ref" href="#29polymarker" title='polymarker' data-ref="29polymarker">polymarker</a>.<a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZNK12G4Polymarker13GetMarkerTypeEv" title='G4Polymarker::GetMarkerType' data-ref="_ZNK12G4Polymarker13GetMarkerTypeEv">GetMarkerType</a>()) {</td></tr>
<tr><th id="507">507</th><td>    <b>default</b>:</td></tr>
<tr><th id="508">508</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::dots" title='G4Polymarker::MarkerType::dots' data-ref="G4Polymarker::MarkerType::dots">dots</a>:</td></tr>
<tr><th id="509">509</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::circles" title='G4Polymarker::MarkerType::circles' data-ref="G4Polymarker::MarkerType::circles">circles</a>:</td></tr>
<tr><th id="510">510</th><td>      glEnable (<span class='error' title="use of undeclared identifier &apos;GL_POINT_SMOOTH&apos;">GL_POINT_SMOOTH</span>); <b>break</b>;</td></tr>
<tr><th id="511">511</th><td>    <b>case</b> <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::squares" title='G4Polymarker::MarkerType::squares' data-ref="G4Polymarker::MarkerType::squares">squares</a>:</td></tr>
<tr><th id="512">512</th><td>      glDisable (<span class='error' title="use of undeclared identifier &apos;GL_POINT_SMOOTH&apos;">GL_POINT_SMOOTH</span>); <b>break</b>;</td></tr>
<tr><th id="513">513</th><td>    }</td></tr>
<tr><th id="514">514</th><td><u>#<span data-ppcond="505">endif</span></u></td></tr>
<tr><th id="515">515</th><td><u>#<span data-ppcond="515">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="516">516</th><td>    glBegin (<span class='error' title="use of undeclared identifier &apos;GL_POINTS&apos;">GL_POINTS</span>);</td></tr>
<tr><th id="517">517</th><td>    <b>for</b> (<span class='error' title="unknown type name &apos;size_t&apos;">size_t</span> <dfn class="local col8 decl" id="48iPoint" title='iPoint' data-type='int' data-ref="48iPoint">iPoint</dfn> = <var>0</var>; iPoint &lt; polymarker.<span class='error' title="no member named &apos;size&apos; in &apos;G4Polymarker&apos;">size</span> (); iPoint++) {</td></tr>
<tr><th id="518">518</th><td>      <a class="typedef" href="../../../global/HEPGeometry/include/G4Point3D.hh.html#G4Point3D" title='G4Point3D' data-type='HepGeom::Point3D&lt;G4double&gt;' data-ref="G4Point3D">G4Point3D</a> <dfn class="local col9 decl" id="49centre" title='centre' data-type='G4Point3D' data-ref="49centre">centre</dfn> = polymarker[iPoint];</td></tr>
<tr><th id="519">519</th><td>      <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span>(centre.x(),centre.y(),centre.z());</td></tr>
<tr><th id="520">520</th><td>    }</td></tr>
<tr><th id="521">521</th><td>    <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span>();     </td></tr>
<tr><th id="522">522</th><td><u>#<span data-ppcond="515">else</span></u></td></tr>
<tr><th id="523">523</th><td>    glBeginVBO(GL_POINTS);</td></tr>
<tr><th id="524">524</th><td></td></tr>
<tr><th id="525">525</th><td>    <b>for</b> (size_t iPoint = <var>0</var>; iPoint &lt; polymarker.size (); iPoint++) {</td></tr>
<tr><th id="526">526</th><td>      fOglVertex.push_back(polymarker[iPoint].x());</td></tr>
<tr><th id="527">527</th><td>      fOglVertex.push_back(polymarker[iPoint].y());</td></tr>
<tr><th id="528">528</th><td>      fOglVertex.push_back(polymarker[iPoint].z());</td></tr>
<tr><th id="529">529</th><td>      fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="530">530</th><td>      fOglVertex.push_back(<var>0</var>);</td></tr>
<tr><th id="531">531</th><td>      fOglVertex.push_back(<var>1</var>);</td></tr>
<tr><th id="532">532</th><td>    }</td></tr>
<tr><th id="533">533</th><td>    glEndVBO();</td></tr>
<tr><th id="534">534</th><td><u>#<span data-ppcond="515">endif</span></u></td></tr>
<tr><th id="535">535</th><td>  }</td></tr>
<tr><th id="536">536</th><td>}</td></tr>
<tr><th id="537">537</th><td></td></tr>
<tr><th id="538">538</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK6G4Text" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK6G4Text">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Text.hh.html#G4Text" title='G4Text' data-ref="G4Text">G4Text</a>&amp; <dfn class="local col0 decl" id="50text" title='text' data-type='const G4Text &amp;' data-ref="50text">text</dfn>) {</td></tr>
<tr><th id="539">539</th><td>  <i>// Pass to specific viewer via virtual function DrawText.</i></td></tr>
<tr><th id="540">540</th><td><i>  // FIXME : Not ready for OPENGL2 for the moment</i></td></tr>
<tr><th id="541">541</th><td><u>#<span data-ppcond="541">ifdef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="542">542</th><td>  <b>return</b>;</td></tr>
<tr><th id="543">543</th><td><u>#<span data-ppcond="541">endif</span></u></td></tr>
<tr><th id="544">544</th><td>  <a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>* <dfn class="local col1 decl" id="51pGLViewer" title='pGLViewer' data-type='G4OpenGLViewer *' data-ref="51pGLViewer">pGLViewer</dfn> = <b>dynamic_cast</b>&lt;<a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>*&gt;(<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a>);</td></tr>
<tr><th id="545">545</th><td>  <b>if</b> (<a class="local col1 ref" href="#51pGLViewer" title='pGLViewer' data-ref="51pGLViewer">pGLViewer</a>) <a class="local col1 ref" href="#51pGLViewer" title='pGLViewer' data-ref="51pGLViewer">pGLViewer</a>-&gt;<a class="virtual ref" href="../include/G4OpenGLViewer.hh.html#_ZN14G4OpenGLViewer8DrawTextERK6G4Text" title='G4OpenGLViewer::DrawText' data-ref="_ZN14G4OpenGLViewer8DrawTextERK6G4Text">DrawText</a>(<a class="local col0 ref" href="#50text" title='text' data-ref="50text">text</a>);</td></tr>
<tr><th id="546">546</th><td>}</td></tr>
<tr><th id="547">547</th><td></td></tr>
<tr><th id="548">548</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK8G4Circle" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK8G4Circle">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Circle.hh.html#G4Circle" title='G4Circle' data-ref="G4Circle">G4Circle</a>&amp; <dfn class="local col2 decl" id="52circle" title='circle' data-type='const G4Circle &amp;' data-ref="52circle">circle</dfn>) {</td></tr>
<tr><th id="549">549</th><td>  <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a> <dfn class="local col3 decl" id="53oneCircle" title='oneCircle' data-type='G4Polymarker' data-ref="53oneCircle">oneCircle</dfn><a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZN12G4PolymarkerC1ERK9G4VMarker" title='G4Polymarker::G4Polymarker' data-ref="_ZN12G4PolymarkerC1ERK9G4VMarker">(</a><a class="local col2 ref" href="#52circle" title='circle' data-ref="52circle">circle</a>);</td></tr>
<tr><th id="550">550</th><td>  oneCircle.<span class='error' title="no member named &apos;push_back&apos; in &apos;G4Polymarker&apos;">push_back</span>(circle.GetPosition());</td></tr>
<tr><th id="551">551</th><td>  <a class="local col3 ref" href="#53oneCircle" title='oneCircle' data-ref="53oneCircle">oneCircle</a>.<a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZN12G4Polymarker13SetMarkerTypeENS_10MarkerTypeE" title='G4Polymarker::SetMarkerType' data-ref="_ZN12G4Polymarker13SetMarkerTypeENS_10MarkerTypeE">SetMarkerType</a>(<a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::circles" title='G4Polymarker::MarkerType::circles' data-ref="G4Polymarker::MarkerType::circles">circles</a>);</td></tr>
<tr><th id="552">552</th><td>  <i>// Call this AddPrimitive to avoid re-doing sub-class code.</i></td></tr>
<tr><th id="553">553</th><td>  <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<a class="virtual member" href="#_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker">AddPrimitive</a>(<a class="local col3 ref" href="#53oneCircle" title='oneCircle' data-ref="53oneCircle">oneCircle</a>);</td></tr>
<tr><th id="554">554</th><td>}</td></tr>
<tr><th id="555">555</th><td></td></tr>
<tr><th id="556">556</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK8G4Square" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK8G4Square">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Square.hh.html#G4Square" title='G4Square' data-ref="G4Square">G4Square</a>&amp; <dfn class="local col4 decl" id="54square" title='square' data-type='const G4Square &amp;' data-ref="54square">square</dfn>) {</td></tr>
<tr><th id="557">557</th><td>  <a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a> <dfn class="local col5 decl" id="55oneSquare" title='oneSquare' data-type='G4Polymarker' data-ref="55oneSquare">oneSquare</dfn><a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZN12G4PolymarkerC1ERK9G4VMarker" title='G4Polymarker::G4Polymarker' data-ref="_ZN12G4PolymarkerC1ERK9G4VMarker">(</a><a class="local col4 ref" href="#54square" title='square' data-ref="54square">square</a>);</td></tr>
<tr><th id="558">558</th><td>  oneSquare.<span class='error' title="no member named &apos;push_back&apos; in &apos;G4Polymarker&apos;">push_back</span>(square.GetPosition());</td></tr>
<tr><th id="559">559</th><td>  <a class="local col5 ref" href="#55oneSquare" title='oneSquare' data-ref="55oneSquare">oneSquare</a>.<a class="ref" href="../../../graphics_reps/include/G4Polymarker.hh.html#_ZN12G4Polymarker13SetMarkerTypeENS_10MarkerTypeE" title='G4Polymarker::SetMarkerType' data-ref="_ZN12G4Polymarker13SetMarkerTypeENS_10MarkerTypeE">SetMarkerType</a>(<a class="type" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker" title='G4Polymarker' data-ref="G4Polymarker">G4Polymarker</a>::<a class="enum" href="../../../graphics_reps/include/G4Polymarker.hh.html#G4Polymarker::MarkerType::squares" title='G4Polymarker::MarkerType::squares' data-ref="G4Polymarker::MarkerType::squares">squares</a>);</td></tr>
<tr><th id="560">560</th><td>  <i>// Call this AddPrimitive to avoid re-doing sub-class code.</i></td></tr>
<tr><th id="561">561</th><td>  <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<a class="virtual member" href="#_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polymarker">AddPrimitive</a>(<a class="local col5 ref" href="#55oneSquare" title='oneSquare' data-ref="55oneSquare">oneSquare</a>);</td></tr>
<tr><th id="562">562</th><td>}</td></tr>
<tr><th id="563">563</th><td></td></tr>
<tr><th id="564">564</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK7G4Scale" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK7G4Scale">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4Scale" title='G4Scale' data-ref="G4Scale">G4Scale</a>&amp; <dfn class="local col6 decl" id="56scale" title='scale' data-type='const G4Scale &amp;' data-ref="56scale">scale</dfn>)</td></tr>
<tr><th id="565">565</th><td>{</td></tr>
<tr><th id="566">566</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddPrimitive&apos;">AddPrimitive</span>(scale);</td></tr>
<tr><th id="567">567</th><td>}</td></tr>
<tr><th id="568">568</th><td></td></tr>
<tr><th id="569">569</th><td><i>//Method for handling G4Polyhedron objects for drawing solids.</i></td></tr>
<tr><th id="570">570</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polyhedron" title='G4OpenGLSceneHandler::AddPrimitive' data-ref="_ZN20G4OpenGLSceneHandler12AddPrimitiveERK12G4Polyhedron">AddPrimitive</dfn> (<em>const</em> <a class="type" href="../../../graphics_reps/include/G4Polyhedron.hh.html#G4Polyhedron" title='G4Polyhedron' data-ref="G4Polyhedron">G4Polyhedron</a>&amp; <dfn class="local col7 decl" id="57polyhedron" title='polyhedron' data-type='const G4Polyhedron &amp;' data-ref="57polyhedron">polyhedron</dfn>) {</td></tr>
<tr><th id="571">571</th><td></td></tr>
<tr><th id="572">572</th><td>  <i>// Assume all facets are planar convex quadrilaterals.</i></td></tr>
<tr><th id="573">573</th><td><i>  // Draw each facet individually</i></td></tr>
<tr><th id="574">574</th><td>  </td></tr>
<tr><th id="575">575</th><td>  <b>if</b> (<a class="local col7 ref" href="#57polyhedron" title='polyhedron' data-ref="57polyhedron">polyhedron</a>.<a class="ref" href="../../../graphics_reps/include/HepPolyhedron.h.html#_ZNK13HepPolyhedron11GetNoFacetsEv" title='HepPolyhedron::GetNoFacets' data-ref="_ZNK13HepPolyhedron11GetNoFacetsEv">GetNoFacets</a>() == <var>0</var>) <b>return</b>;</td></tr>
<tr><th id="576">576</th><td></td></tr>
<tr><th id="577">577</th><td>  <i>// Need access to data in G4OpenGLViewer.  static_cast doesn't work</i></td></tr>
<tr><th id="578">578</th><td><i>  // with a virtual base class, so use dynamic_cast.</i></td></tr>
<tr><th id="579">579</th><td>  <a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>* <dfn class="local col8 decl" id="58pGLViewer" title='pGLViewer' data-type='G4OpenGLViewer *' data-ref="58pGLViewer">pGLViewer</dfn> = <b>dynamic_cast</b>&lt;<a class="type" href="../include/G4OpenGLViewer.hh.html#G4OpenGLViewer" title='G4OpenGLViewer' data-ref="G4OpenGLViewer">G4OpenGLViewer</a>*&gt;(<a class="member" href="../../management/include/G4VSceneHandler.hh.html#G4VSceneHandler::fpViewer" title='G4VSceneHandler::fpViewer' data-ref="G4VSceneHandler::fpViewer">fpViewer</a>);</td></tr>
<tr><th id="580">580</th><td>  <b>if</b> (!<a class="local col8 ref" href="#58pGLViewer" title='pGLViewer' data-ref="58pGLViewer">pGLViewer</a>) <b>return</b>;</td></tr>
<tr><th id="581">581</th><td>  </td></tr>
<tr><th id="582">582</th><td>  <i>// Get view parameters that the user can force through the vis</i></td></tr>
<tr><th id="583">583</th><td><i>  // attributes, thereby over-riding the current view parameter.</i></td></tr>
<tr><th id="584">584</th><td>  <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle" title='G4ViewParameters::DrawingStyle' data-ref="G4ViewParameters::DrawingStyle">DrawingStyle</a> <dfn class="local col9 decl" id="59drawing_style" title='drawing_style' data-type='G4ViewParameters::DrawingStyle' data-ref="59drawing_style">drawing_style</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetDrawingStyle</span> (fpVisAttribs);</td></tr>
<tr><th id="585">585</th><td></td></tr>
<tr><th id="586">586</th><td>  <i>// Note that in stored mode, because this call gets embedded in a display</i></td></tr>
<tr><th id="587">587</th><td><i>  //  list, it is the colour _at the time of_ creation of the display list, so</i></td></tr>
<tr><th id="588">588</th><td><i>  //  even if the colour is changed, for example, by interaction with a Qt</i></td></tr>
<tr><th id="589">589</th><td><i>  //  window, current_colour does not change.</i></td></tr>
<tr><th id="590">590</th><td>  <span class='error' title="unknown type name &apos;GLfloat&apos;">GLfloat</span>* <dfn class="local col0 decl" id="60painting_colour" title='painting_colour' data-type='int *' data-ref="60painting_colour">painting_colour</dfn>;</td></tr>
<tr><th id="591">591</th><td>  <span class='error' title="unknown type name &apos;GLfloat&apos;">GLfloat</span> <dfn class="local col1 decl" id="61current_colour" title='current_colour' data-type='int [4]' data-ref="61current_colour">current_colour</dfn> [<var>4</var>];</td></tr>
<tr><th id="592">592</th><td>  glGetFloatv (<span class='error' title="use of undeclared identifier &apos;GL_CURRENT_COLOR&apos;">GL_CURRENT_COLOR</span>, current_colour);</td></tr>
<tr><th id="593">593</th><td>  </td></tr>
<tr><th id="594">594</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4bool" title='G4bool' data-type='bool' data-ref="G4bool">G4bool</a> <dfn class="local col2 decl" id="62isTransparent" title='isTransparent' data-type='G4bool' data-ref="62isTransparent">isTransparent</dfn> = <b>false</b>;</td></tr>
<tr><th id="595">595</th><td>  <b>if</b> (current_colour[<var>3</var>] &lt; <var>1.</var>) {  <i>// This object is transparent</i></td></tr>
<tr><th id="596">596</th><td>    <a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a> = <b>true</b>;</td></tr>
<tr><th id="597">597</th><td>  }</td></tr>
<tr><th id="598">598</th><td></td></tr>
<tr><th id="599">599</th><td>  </td></tr>
<tr><th id="600">600</th><td>  <b>if</b>  (<a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a> == <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlr" title='G4ViewParameters::DrawingStyle::hlr' data-ref="G4ViewParameters::DrawingStyle::hlr">hlr</a>) {</td></tr>
<tr><th id="601">601</th><td>    <i>// This is the colour used to paint surfaces in hlr mode.</i></td></tr>
<tr><th id="602">602</th><td>    <span class='error' title="unknown type name &apos;GLfloat&apos;">GLfloat</span> <dfn class="local col3 decl" id="63clear_colour" title='clear_colour' data-type='int [4]' data-ref="63clear_colour">clear_colour</dfn>[<var>4</var>];</td></tr>
<tr><th id="603">603</th><td>    glGetFloatv (<span class='error' title="use of undeclared identifier &apos;GL_COLOR_CLEAR_VALUE&apos;">GL_COLOR_CLEAR_VALUE</span>, clear_colour);</td></tr>
<tr><th id="604">604</th><td>    painting_colour = clear_colour;</td></tr>
<tr><th id="605">605</th><td>  } <b>else</b> {  <i>// drawing_style == G4ViewParameters::hlhsr</i></td></tr>
<tr><th id="606">606</th><td>    painting_colour = current_colour;</td></tr>
<tr><th id="607">607</th><td>  }</td></tr>
<tr><th id="608">608</th><td></td></tr>
<tr><th id="609">609</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a> <dfn class="local col4 decl" id="64lineWidth" title='lineWidth' data-type='G4double' data-ref="64lineWidth">lineWidth</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetLineWidth</span>(fpVisAttribs);</td></tr>
<tr><th id="610">610</th><td>  <a class="local col8 ref" href="#58pGLViewer" title='pGLViewer' data-ref="58pGLViewer">pGLViewer</a>-&gt;<a class="ref" href="../include/G4OpenGLViewer.hh.html#_ZN14G4OpenGLViewer15ChangeLineWidthEd" title='G4OpenGLViewer::ChangeLineWidth' data-ref="_ZN14G4OpenGLViewer15ChangeLineWidthEd">ChangeLineWidth</a>(<a class="local col4 ref" href="#64lineWidth" title='lineWidth' data-ref="64lineWidth">lineWidth</a>);</td></tr>
<tr><th id="611">611</th><td></td></tr>
<tr><th id="612">612</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4bool" title='G4bool' data-type='bool' data-ref="G4bool">G4bool</a> <dfn class="local col5 decl" id="65isAuxEdgeVisible" title='isAuxEdgeVisible' data-type='G4bool' data-ref="65isAuxEdgeVisible">isAuxEdgeVisible</dfn> = <span class='error' title="cannot initialize object parameter of type &apos;G4VSceneHandler&apos; with an expression of type &apos;G4OpenGLSceneHandler&apos;">GetAuxEdgeVisible</span> (fpVisAttribs);</td></tr>
<tr><th id="613">613</th><td></td></tr>
<tr><th id="614">614</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4bool" title='G4bool' data-type='bool' data-ref="G4bool">G4bool</a> <dfn class="local col6 decl" id="66clipping" title='clipping' data-type='G4bool' data-ref="66clipping">clipping</dfn> = pGLViewer-&gt;fVP.IsSection() || pGLViewer-&gt;fVP.IsCutaway();</td></tr>
<tr><th id="615">615</th><td></td></tr>
<tr><th id="616">616</th><td>  <i>// Lighting disabled unless otherwise requested</i></td></tr>
<tr><th id="617">617</th><td><u>#<span data-ppcond="617">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="618">618</th><td>  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="619">619</th><td><u>#<span data-ppcond="617">endif</span></u></td></tr>
<tr><th id="620">620</th><td></td></tr>
<tr><th id="621">621</th><td>  <b>switch</b> (<a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a>) {</td></tr>
<tr><th id="622">622</th><td>  <b>case</b> (<a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlhsr" title='G4ViewParameters::DrawingStyle::hlhsr' data-ref="G4ViewParameters::DrawingStyle::hlhsr">hlhsr</a>):</td></tr>
<tr><th id="623">623</th><td>    <i>// Set up as for hidden line removal but paint polygon faces later...</i></td></tr>
<tr><th id="624">624</th><td>  <b>case</b> (<a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlr" title='G4ViewParameters::DrawingStyle::hlr' data-ref="G4ViewParameters::DrawingStyle::hlr">hlr</a>):</td></tr>
<tr><th id="625">625</th><td>    glEnable (<span class='error' title="use of undeclared identifier &apos;GL_STENCIL_TEST&apos;">GL_STENCIL_TEST</span>);</td></tr>
<tr><th id="626">626</th><td>    <i>// The stencil buffer is cleared in G4OpenGLViewer::ClearView.</i></td></tr>
<tr><th id="627">627</th><td><i>    // The procedure below leaves it clear.</i></td></tr>
<tr><th id="628">628</th><td>    glStencilFunc (<span class='error' title="use of undeclared identifier &apos;GL_ALWAYS&apos;">GL_ALWAYS</span>, <var>0</var>, <var>1</var>);</td></tr>
<tr><th id="629">629</th><td>    glStencilOp (<span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>, <span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>, <span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>);</td></tr>
<tr><th id="630">630</th><td>    glEnable (<span class='error' title="use of undeclared identifier &apos;GL_DEPTH_TEST&apos;">GL_DEPTH_TEST</span>);</td></tr>
<tr><th id="631">631</th><td>    glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);</td></tr>
<tr><th id="632">632</th><td>    <b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="633">633</th><td>      <i>// Transparent...</i></td></tr>
<tr><th id="634">634</th><td>      glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="635">635</th><td>      glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="636">636</th><td>      glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="637">637</th><td>      glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="638">638</th><td>    } <b>else</b> {</td></tr>
<tr><th id="639">639</th><td>      <i>// Opaque...</i></td></tr>
<tr><th id="640">640</th><td>      <b>if</b> (<a class="local col6 ref" href="#66clipping" title='clipping' data-ref="66clipping">clipping</a>) {</td></tr>
<tr><th id="641">641</th><td>        glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="642">642</th><td>        glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="643">643</th><td>	glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="644">644</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="645">645</th><td>      } <b>else</b> {</td></tr>
<tr><th id="646">646</th><td>        glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="647">647</th><td>        glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="648">648</th><td>	glEnable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="649">649</th><td>	glCullFace (<span class='error' title="use of undeclared identifier &apos;GL_BACK&apos;">GL_BACK</span>);</td></tr>
<tr><th id="650">650</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="651">651</th><td>      }</td></tr>
<tr><th id="652">652</th><td>    }</td></tr>
<tr><th id="653">653</th><td>    <b>break</b>;</td></tr>
<tr><th id="654">654</th><td>  <b>case</b> (<a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hsr" title='G4ViewParameters::DrawingStyle::hsr' data-ref="G4ViewParameters::DrawingStyle::hsr">hsr</a>):</td></tr>
<tr><th id="655">655</th><td>    glEnable (<span class='error' title="use of undeclared identifier &apos;GL_DEPTH_TEST&apos;">GL_DEPTH_TEST</span>);</td></tr>
<tr><th id="656">656</th><td>    glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);    </td></tr>
<tr><th id="657">657</th><td>    <b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="658">658</th><td>      <i>// Transparent...</i></td></tr>
<tr><th id="659">659</th><td>      glDepthMask (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);  <i>// Make depth buffer read-only.</i></td></tr>
<tr><th id="660">660</th><td>      glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="661">661</th><td><u>#<span data-ppcond="661">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="662">662</th><td>      glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="663">663</th><td><u>#<span data-ppcond="661">endif</span></u></td></tr>
<tr><th id="664">664</th><td>      glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="665">665</th><td>      glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="666">666</th><td>    } <b>else</b> {</td></tr>
<tr><th id="667">667</th><td>      <i>// Opaque...</i></td></tr>
<tr><th id="668">668</th><td>      glDepthMask (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);  <i>// Make depth buffer writable (default).</i></td></tr>
<tr><th id="669">669</th><td>      <b>if</b> (<a class="local col6 ref" href="#66clipping" title='clipping' data-ref="66clipping">clipping</a>) {</td></tr>
<tr><th id="670">670</th><td>        glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="671">671</th><td>        glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="672">672</th><td>	glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="673">673</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="674">674</th><td>      } <b>else</b> {</td></tr>
<tr><th id="675">675</th><td>        glColorMaterial(<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>);</td></tr>
<tr><th id="676">676</th><td><u>#<span data-ppcond="676">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="677">677</th><td>        glEnable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>);</td></tr>
<tr><th id="678">678</th><td><u>#<span data-ppcond="676">endif</span></u></td></tr>
<tr><th id="679">679</th><td>  glEnable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="680">680</th><td>	glCullFace (<span class='error' title="use of undeclared identifier &apos;GL_BACK&apos;">GL_BACK</span>);</td></tr>
<tr><th id="681">681</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="682">682</th><td>      }</td></tr>
<tr><th id="683">683</th><td>    }</td></tr>
<tr><th id="684">684</th><td><u>#<span data-ppcond="684">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="685">685</th><td>    <b>if</b> (!fProcessing2D) glEnable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="686">686</th><td><u>#<span data-ppcond="684">endif</span></u></td></tr>
<tr><th id="687">687</th><td>      <b>break</b>;</td></tr>
<tr><th id="688">688</th><td>  <b>case</b> (<a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::wireframe" title='G4ViewParameters::DrawingStyle::wireframe' data-ref="G4ViewParameters::DrawingStyle::wireframe">wireframe</a>):</td></tr>
<tr><th id="689">689</th><td>  <b>default</b>:</td></tr>
<tr><th id="690">690</th><td>    glEnable (<span class='error' title="use of undeclared identifier &apos;GL_DEPTH_TEST&apos;">GL_DEPTH_TEST</span>);</td></tr>
<tr><th id="691">691</th><td>    glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);    <i>//??? was GL_ALWAYS</i></td></tr>
<tr><th id="692">692</th><td>    glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="693">693</th><td>    glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="694">694</th><td>    <b>break</b>;</td></tr>
<tr><th id="695">695</th><td>  }</td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td>  <i>//Loop through all the facets...</i></td></tr>
<tr><th id="698">698</th><td>  <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="699">699</th><td><u>#<span data-ppcond="699">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="700">700</th><td>  glBegin (<span class='error' title="use of undeclared identifier &apos;GL_QUADS&apos;">GL_QUADS</span>);</td></tr>
<tr><th id="701">701</th><td>  glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="702">702</th><td><u>#<span data-ppcond="699">else</span></u></td></tr>
<tr><th id="703">703</th><td>  fEmulate_GL_QUADS = <b>true</b>;</td></tr>
<tr><th id="704">704</th><td>  glBeginVBO(GL_TRIANGLE_STRIP);</td></tr>
<tr><th id="705">705</th><td><u>#<span data-ppcond="699">endif</span></u></td></tr>
<tr><th id="706">706</th><td>  <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4bool" title='G4bool' data-type='bool' data-ref="G4bool">G4bool</a> <dfn class="local col7 decl" id="67notLastFace" title='notLastFace' data-type='G4bool' data-ref="67notLastFace">notLastFace</dfn>;</td></tr>
<tr><th id="707">707</th><td>  <b>do</b> {</td></tr>
<tr><th id="708">708</th><td></td></tr>
<tr><th id="709">709</th><td>    <i>//First, find vertices, edgeflags and normals and note "not last facet"...</i></td></tr>
<tr><th id="710">710</th><td>    <a class="typedef" href="../../../global/HEPGeometry/include/G4Point3D.hh.html#G4Point3D" title='G4Point3D' data-type='HepGeom::Point3D&lt;G4double&gt;' data-ref="G4Point3D">G4Point3D</a> <a class="ref fake" href="../../../externals/clhep/include/CLHEP/Geometry/Point3D.h.html#_ZN7HepGeom7Point3DIdEC1Ev" title='HepGeom::Point3D&lt;double&gt;::Point3D' data-ref="_ZN7HepGeom7Point3DIdEC1Ev"></a><dfn class="local col8 decl" id="68vertex" title='vertex' data-type='G4Point3D [4]' data-ref="68vertex">vertex</dfn>[<var>4</var>];</td></tr>
<tr><th id="711">711</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col9 decl" id="69edgeFlag" title='edgeFlag' data-type='G4int [4]' data-ref="69edgeFlag">edgeFlag</dfn>[<var>4</var>];</td></tr>
<tr><th id="712">712</th><td>    <a class="typedef" href="../../../global/HEPGeometry/include/G4Normal3D.hh.html#G4Normal3D" title='G4Normal3D' data-type='HepGeom::Normal3D&lt;G4double&gt;' data-ref="G4Normal3D">G4Normal3D</a> <a class="ref fake" href="../../../externals/clhep/include/CLHEP/Geometry/Normal3D.h.html#_ZN7HepGeom8Normal3DIdEC1Ev" title='HepGeom::Normal3D&lt;double&gt;::Normal3D' data-ref="_ZN7HepGeom8Normal3DIdEC1Ev"></a><dfn class="local col0 decl" id="70normals" title='normals' data-type='G4Normal3D [4]' data-ref="70normals">normals</dfn>[<var>4</var>];</td></tr>
<tr><th id="713">713</th><td>    <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col1 decl" id="71nEdges" title='nEdges' data-type='G4int' data-ref="71nEdges">nEdges</dfn>;</td></tr>
<tr><th id="714">714</th><td>    <a class="local col7 ref" href="#67notLastFace" title='notLastFace' data-ref="67notLastFace">notLastFace</a> = <a class="local col7 ref" href="#57polyhedron" title='polyhedron' data-ref="57polyhedron">polyhedron</a>.<a class="ref" href="../../../graphics_reps/include/HepPolyhedron.h.html#_ZNK13HepPolyhedron12GetNextFacetERiPN7HepGeom7Point3DIdEEPiPNS1_8Normal3DIdEE" title='HepPolyhedron::GetNextFacet' data-ref="_ZNK13HepPolyhedron12GetNextFacetERiPN7HepGeom7Point3DIdEEPiPNS1_8Normal3DIdEE">GetNextFacet</a>(<span class='refarg'><a class="local col1 ref" href="#71nEdges" title='nEdges' data-ref="71nEdges">nEdges</a></span>, <a class="local col8 ref" href="#68vertex" title='vertex' data-ref="68vertex">vertex</a>, <a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>, <a class="local col0 ref" href="#70normals" title='normals' data-ref="70normals">normals</a>);</td></tr>
<tr><th id="715">715</th><td></td></tr>
<tr><th id="716">716</th><td>    <i>//Loop through the four edges of each G4Facet...</i></td></tr>
<tr><th id="717">717</th><td>    <b>for</b>(<a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col2 decl" id="72edgeCount" title='edgeCount' data-type='G4int' data-ref="72edgeCount">edgeCount</dfn> = <var>0</var>; <a class="local col2 ref" href="#72edgeCount" title='edgeCount' data-ref="72edgeCount">edgeCount</a> &lt; <a class="local col1 ref" href="#71nEdges" title='nEdges' data-ref="71nEdges">nEdges</a>; ++<a class="local col2 ref" href="#72edgeCount" title='edgeCount' data-ref="72edgeCount">edgeCount</a>) {</td></tr>
<tr><th id="718">718</th><td>      <i>// Check to see if edge is visible or not...</i></td></tr>
<tr><th id="719">719</th><td>      <b>if</b> (<a class="local col5 ref" href="#65isAuxEdgeVisible" title='isAuxEdgeVisible' data-ref="65isAuxEdgeVisible">isAuxEdgeVisible</a>) {</td></tr>
<tr><th id="720">720</th><td>	<a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>[<a class="local col2 ref" href="#72edgeCount" title='edgeCount' data-ref="72edgeCount">edgeCount</a>] = <var>1</var>;</td></tr>
<tr><th id="721">721</th><td>      }</td></tr>
<tr><th id="722">722</th><td><u>#<span data-ppcond="722">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="723">723</th><td>      <b>if</b> (<a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>[<a class="local col2 ref" href="#72edgeCount" title='edgeCount' data-ref="72edgeCount">edgeCount</a>] &gt; <var>0</var>) {</td></tr>
<tr><th id="724">724</th><td>        <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>true</b>) {</td></tr>
<tr><th id="725">725</th><td>          glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="726">726</th><td>          <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="727">727</th><td>        }</td></tr>
<tr><th id="728">728</th><td>      } <b>else</b> {</td></tr>
<tr><th id="729">729</th><td>        <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>false</b>) {</td></tr>
<tr><th id="730">730</th><td>          glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);</td></tr>
<tr><th id="731">731</th><td>          <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>false</b>;</td></tr>
<tr><th id="732">732</th><td>        }</td></tr>
<tr><th id="733">733</th><td>      }</td></tr>
<tr><th id="734">734</th><td>      <span class='error' title="use of undeclared identifier &apos;glNormal3d&apos;">glNormal3d</span> (normals[edgeCount].x(),</td></tr>
<tr><th id="735">735</th><td>		  normals[edgeCount].y(),</td></tr>
<tr><th id="736">736</th><td>		  normals[edgeCount].z());</td></tr>
<tr><th id="737">737</th><td>      <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (vertex[edgeCount].x(), </td></tr>
<tr><th id="738">738</th><td>		  vertex[edgeCount].y(),</td></tr>
<tr><th id="739">739</th><td>		  vertex[edgeCount].z());</td></tr>
<tr><th id="740">740</th><td><u>#<span data-ppcond="722">else</span></u></td></tr>
<tr><th id="741">741</th><td></td></tr>
<tr><th id="742">742</th><td>      fOglVertex.push_back(vertex[edgeCount].x());</td></tr>
<tr><th id="743">743</th><td>      fOglVertex.push_back(vertex[edgeCount].y());</td></tr>
<tr><th id="744">744</th><td>      fOglVertex.push_back(vertex[edgeCount].z());</td></tr>
<tr><th id="745">745</th><td>      </td></tr>
<tr><th id="746">746</th><td>      fOglVertex.push_back(normals[edgeCount].x());</td></tr>
<tr><th id="747">747</th><td>      fOglVertex.push_back(normals[edgeCount].y());</td></tr>
<tr><th id="748">748</th><td>      fOglVertex.push_back(normals[edgeCount].z());</td></tr>
<tr><th id="749">749</th><td></td></tr>
<tr><th id="750">750</th><td><u>#<span data-ppcond="722">endif</span></u></td></tr>
<tr><th id="751">751</th><td>      </td></tr>
<tr><th id="752">752</th><td>    }</td></tr>
<tr><th id="753">753</th><td>   </td></tr>
<tr><th id="754">754</th><td>    <i>// HepPolyhedron produces triangles too; in that case add an extra</i></td></tr>
<tr><th id="755">755</th><td><i>    // vertex identical to first...</i></td></tr>
<tr><th id="756">756</th><td>    <b>if</b> (<a class="local col1 ref" href="#71nEdges" title='nEdges' data-ref="71nEdges">nEdges</a> == <var>3</var>) {</td></tr>
<tr><th id="757">757</th><td>      <a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4int" title='G4int' data-type='int' data-ref="G4int">G4int</a> <dfn class="local col3 decl" id="73edgeCount" title='edgeCount' data-type='G4int' data-ref="73edgeCount">edgeCount</dfn> = <var>3</var>;</td></tr>
<tr><th id="758">758</th><td>      <a class="local col0 ref" href="#70normals" title='normals' data-ref="70normals">normals</a>[<a class="local col3 ref" href="#73edgeCount" title='edgeCount' data-ref="73edgeCount">edgeCount</a>] <a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/Normal3D.h.html#_ZN7HepGeom8Normal3DIdEaSERKS1_" title='HepGeom::Normal3D&lt;double&gt;::operator=' data-ref="_ZN7HepGeom8Normal3DIdEaSERKS1_">=</a> <a class="local col0 ref" href="#70normals" title='normals' data-ref="70normals">normals</a>[<var>0</var>];</td></tr>
<tr><th id="759">759</th><td>      <a class="local col8 ref" href="#68vertex" title='vertex' data-ref="68vertex">vertex</a>[<a class="local col3 ref" href="#73edgeCount" title='edgeCount' data-ref="73edgeCount">edgeCount</a>] <a class="ref" href="../../../externals/clhep/include/CLHEP/Geometry/Point3D.h.html#_ZN7HepGeom7Point3DIdEaSERKS1_" title='HepGeom::Point3D&lt;double&gt;::operator=' data-ref="_ZN7HepGeom7Point3DIdEaSERKS1_">=</a> <a class="local col8 ref" href="#68vertex" title='vertex' data-ref="68vertex">vertex</a>[<var>0</var>];</td></tr>
<tr><th id="760">760</th><td><u>#<span data-ppcond="760">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="761">761</th><td>      <a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>[<a class="local col3 ref" href="#73edgeCount" title='edgeCount' data-ref="73edgeCount">edgeCount</a>] = -<var>1</var>;</td></tr>
<tr><th id="762">762</th><td>      <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>false</b>) {</td></tr>
<tr><th id="763">763</th><td>        glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);</td></tr>
<tr><th id="764">764</th><td>        <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>false</b>;</td></tr>
<tr><th id="765">765</th><td>      }</td></tr>
<tr><th id="766">766</th><td></td></tr>
<tr><th id="767">767</th><td>      <span class='error' title="use of undeclared identifier &apos;glNormal3d&apos;">glNormal3d</span> (normals[edgeCount].x(),</td></tr>
<tr><th id="768">768</th><td>		  normals[edgeCount].y(), </td></tr>
<tr><th id="769">769</th><td>		  normals[edgeCount].z());</td></tr>
<tr><th id="770">770</th><td>      <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (vertex[edgeCount].x(),</td></tr>
<tr><th id="771">771</th><td>		  vertex[edgeCount].y(), </td></tr>
<tr><th id="772">772</th><td>		  vertex[edgeCount].z());</td></tr>
<tr><th id="773">773</th><td><u>#<span data-ppcond="760">else</span></u></td></tr>
<tr><th id="774">774</th><td>      fOglVertex.push_back(vertex[edgeCount].x());</td></tr>
<tr><th id="775">775</th><td>      fOglVertex.push_back(vertex[edgeCount].y());</td></tr>
<tr><th id="776">776</th><td>      fOglVertex.push_back(vertex[edgeCount].z());</td></tr>
<tr><th id="777">777</th><td>      </td></tr>
<tr><th id="778">778</th><td>      fOglVertex.push_back(normals[edgeCount].x());</td></tr>
<tr><th id="779">779</th><td>      fOglVertex.push_back(normals[edgeCount].y());</td></tr>
<tr><th id="780">780</th><td>      fOglVertex.push_back(normals[edgeCount].z());</td></tr>
<tr><th id="781">781</th><td></td></tr>
<tr><th id="782">782</th><td><u>#<span data-ppcond="760">endif</span></u></td></tr>
<tr><th id="783">783</th><td>    }</td></tr>
<tr><th id="784">784</th><td>    <i>// Trap situation where number of edges is &gt; 4...</i></td></tr>
<tr><th id="785">785</th><td>    <b>if</b> (<a class="local col1 ref" href="#71nEdges" title='nEdges' data-ref="71nEdges">nEdges</a> &gt; <var>4</var>) {</td></tr>
<tr><th id="786">786</th><td>      <a class="macro" href="../../../global/management/include/G4ios.hh.html#47" title="(*_G4cerr_p())" data-ref="_M/G4cerr">G4cerr</a> <span class='error' title="invalid operands to binary expression (&apos;int&apos; and &apos;const char *&apos;)">&lt;&lt;</span></td></tr>
<tr><th id="787">787</th><td>	<q>"G4OpenGLSceneHandler::AddPrimitive(G4Polyhedron): WARNING"</q></td></tr>
<tr><th id="788">788</th><td>	<q>"\n   G4Polyhedron facet with "</q> &lt;&lt; nEdges &lt;&lt; <q>" edges"</q> &lt;&lt; <a class="macro" href="../../../global/management/include/G4ios.hh.html#60" title="std::endl" data-ref="_M/G4endl">G4endl</a>;</td></tr>
<tr><th id="789">789</th><td>    }</td></tr>
<tr><th id="790">790</th><td></td></tr>
<tr><th id="791">791</th><td>    </td></tr>
<tr><th id="792">792</th><td>    <i>// Do it all over again (twice) for hlr...</i></td></tr>
<tr><th id="793">793</th><td>    <b>if</b>  (<a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a> == <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlr" title='G4ViewParameters::DrawingStyle::hlr' data-ref="G4ViewParameters::DrawingStyle::hlr">hlr</a> ||</td></tr>
<tr><th id="794">794</th><td>	 <a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a> == <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlhsr" title='G4ViewParameters::DrawingStyle::hlhsr' data-ref="G4ViewParameters::DrawingStyle::hlhsr">hlhsr</a>) {</td></tr>
<tr><th id="795">795</th><td></td></tr>
<tr><th id="796">796</th><td><u>#<span data-ppcond="796">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="797">797</th><td>      glDisable(<span class='error' title="use of undeclared identifier &apos;GL_COLOR_MATERIAL&apos;">GL_COLOR_MATERIAL</span>); <i>// Revert to glMaterial for hlr/sr.</i></td></tr>
<tr><th id="798">798</th><td><u>#<span data-ppcond="796">endif</span></u></td></tr>
<tr><th id="799">799</th><td></td></tr>
<tr><th id="800">800</th><td><u>#<span data-ppcond="800">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="801">801</th><td>      <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();  <i>// Placed here to balance glBegin above, allowing GL</i></td></tr>
<tr><th id="802">802</th><td><u>#<span data-ppcond="800">else</span></u></td></tr>
<tr><th id="803">803</th><td>      glEndVBO();</td></tr>
<tr><th id="804">804</th><td><u>#<span data-ppcond="800">endif</span></u></td></tr>
<tr><th id="805">805</th><td>      <i>// state changes below, then glBegin again.  Avoids</i></td></tr>
<tr><th id="806">806</th><td><i>		 // having glBegin/End pairs *inside* loop in the more</i></td></tr>
<tr><th id="807">807</th><td><i>		 // usual case of no hidden line removal.</i></td></tr>
<tr><th id="808">808</th><td><i></i></td></tr>
<tr><th id="809">809</th><td><i>      // Lighting disabled unless otherwise requested</i></td></tr>
<tr><th id="810">810</th><td>      glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="811">811</th><td></td></tr>
<tr><th id="812">812</th><td>      <i>// Draw through stencil...</i></td></tr>
<tr><th id="813">813</th><td>      glStencilFunc (<span class='error' title="use of undeclared identifier &apos;GL_EQUAL&apos;">GL_EQUAL</span>, <var>0</var>, <var>1</var>);</td></tr>
<tr><th id="814">814</th><td>      glStencilOp (<span class='error' title="use of undeclared identifier &apos;GL_KEEP&apos;">GL_KEEP</span>, <span class='error' title="use of undeclared identifier &apos;GL_KEEP&apos;">GL_KEEP</span>, <span class='error' title="use of undeclared identifier &apos;GL_KEEP&apos;">GL_KEEP</span>);</td></tr>
<tr><th id="815">815</th><td>      <b>if</b> (<a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a> == <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlhsr" title='G4ViewParameters::DrawingStyle::hlhsr' data-ref="G4ViewParameters::DrawingStyle::hlhsr">hlhsr</a>) {</td></tr>
<tr><th id="816">816</th><td>	<b>if</b> (!fProcessing2D) glEnable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="817">817</th><td>      }</td></tr>
<tr><th id="818">818</th><td>      glEnable (<span class='error' title="use of undeclared identifier &apos;GL_DEPTH_TEST&apos;">GL_DEPTH_TEST</span>);</td></tr>
<tr><th id="819">819</th><td>      glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);    </td></tr>
<tr><th id="820">820</th><td>      <b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="821">821</th><td>	<i>// Transparent...</i></td></tr>
<tr><th id="822">822</th><td>	glDepthMask (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);  <i>// Make depth buffer read-only.</i></td></tr>
<tr><th id="823">823</th><td>	glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="824">824</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="825">825</th><td>      } <b>else</b> {</td></tr>
<tr><th id="826">826</th><td>	<i>// Opaque...</i></td></tr>
<tr><th id="827">827</th><td>	glDepthMask (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);  <i>// Make depth buffer writable (default).</i></td></tr>
<tr><th id="828">828</th><td>	<b>if</b> (<a class="local col6 ref" href="#66clipping" title='clipping' data-ref="66clipping">clipping</a>) {</td></tr>
<tr><th id="829">829</th><td>	  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="830">830</th><td>	  glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="831">831</th><td>	} <b>else</b> {</td></tr>
<tr><th id="832">832</th><td>	  glEnable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="833">833</th><td>	  glCullFace (<span class='error' title="use of undeclared identifier &apos;GL_BACK&apos;">GL_BACK</span>);</td></tr>
<tr><th id="834">834</th><td>	  glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_FILL&apos;">GL_FILL</span>);</td></tr>
<tr><th id="835">835</th><td>	}</td></tr>
<tr><th id="836">836</th><td>      }</td></tr>
<tr><th id="837">837</th><td>      <b>if</b>  (<a class="local col9 ref" href="#59drawing_style" title='drawing_style' data-ref="59drawing_style">drawing_style</a> == <a class="type" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters" title='G4ViewParameters' data-ref="G4ViewParameters">G4ViewParameters</a>::<a class="enum" href="../../management/include/G4ViewParameters.hh.html#G4ViewParameters::DrawingStyle::hlr" title='G4ViewParameters::DrawingStyle::hlr' data-ref="G4ViewParameters::DrawingStyle::hlr">hlr</a>) {</td></tr>
<tr><th id="838">838</th><td>	<b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="839">839</th><td>	  <i>// Transparent - don't paint...</i></td></tr>
<tr><th id="840">840</th><td>	  <b>goto</b> <a class="lbl" href="#74end_of_drawing_through_stencil" data-ref="74end_of_drawing_through_stencil">end_of_drawing_through_stencil</a>;</td></tr>
<tr><th id="841">841</th><td>	}</td></tr>
<tr><th id="842">842</th><td>      }</td></tr>
<tr><th id="843">843</th><td>      <b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="844">844</th><td>	<i>// Transparent...</i></td></tr>
<tr><th id="845">845</th><td>	glMaterialfv (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>, painting_colour);</td></tr>
<tr><th id="846">846</th><td>      } <b>else</b> {</td></tr>
<tr><th id="847">847</th><td>	<i>// Opaque...</i></td></tr>
<tr><th id="848">848</th><td>	glMaterialfv (<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_AMBIENT_AND_DIFFUSE&apos;">GL_AMBIENT_AND_DIFFUSE</span>, painting_colour);</td></tr>
<tr><th id="849">849</th><td>      }</td></tr>
<tr><th id="850">850</th><td>      glColor4fv (painting_colour);</td></tr>
<tr><th id="851">851</th><td><u>#<span data-ppcond="851">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="852">852</th><td>      glBegin (<span class='error' title="use of undeclared identifier &apos;GL_QUADS&apos;">GL_QUADS</span>);</td></tr>
<tr><th id="853">853</th><td>      glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="854">854</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="855">855</th><td><u>#<span data-ppcond="851">else</span></u></td></tr>
<tr><th id="856">856</th><td>      fEmulate_GL_QUADS = <b>true</b>;</td></tr>
<tr><th id="857">857</th><td>      glBeginVBO(GL_TRIANGLE_STRIP);</td></tr>
<tr><th id="858">858</th><td><u>#<span data-ppcond="851">endif</span></u></td></tr>
<tr><th id="859">859</th><td></td></tr>
<tr><th id="860">860</th><td>      <b>for</b> (<em>int</em> <dfn class="local col5 decl" id="75edgeCount" title='edgeCount' data-type='int' data-ref="75edgeCount">edgeCount</dfn> = <var>0</var>; <a class="local col5 ref" href="#75edgeCount" title='edgeCount' data-ref="75edgeCount">edgeCount</a> &lt; <var>4</var>; ++<a class="local col5 ref" href="#75edgeCount" title='edgeCount' data-ref="75edgeCount">edgeCount</a>) {</td></tr>
<tr><th id="861">861</th><td><u>#<span data-ppcond="861">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="862">862</th><td>        <b>if</b> (<a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>[<a class="local col5 ref" href="#75edgeCount" title='edgeCount' data-ref="75edgeCount">edgeCount</a>] &gt; <var>0</var>) {</td></tr>
<tr><th id="863">863</th><td>          <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>true</b>) {</td></tr>
<tr><th id="864">864</th><td>            glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="865">865</th><td>            <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="866">866</th><td>          }</td></tr>
<tr><th id="867">867</th><td>        } <b>else</b> {</td></tr>
<tr><th id="868">868</th><td>          <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>false</b>) {</td></tr>
<tr><th id="869">869</th><td>            glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);</td></tr>
<tr><th id="870">870</th><td>            <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>false</b>;</td></tr>
<tr><th id="871">871</th><td>          }</td></tr>
<tr><th id="872">872</th><td>        }</td></tr>
<tr><th id="873">873</th><td>				<span class='error' title="use of undeclared identifier &apos;glNormal3d&apos;">glNormal3d</span> (normals[edgeCount].x(),</td></tr>
<tr><th id="874">874</th><td>							normals[edgeCount].y(),</td></tr>
<tr><th id="875">875</th><td>							normals[edgeCount].z());</td></tr>
<tr><th id="876">876</th><td>        <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (vertex[edgeCount].x(),</td></tr>
<tr><th id="877">877</th><td>                    vertex[edgeCount].y(),</td></tr>
<tr><th id="878">878</th><td>                    vertex[edgeCount].z());</td></tr>
<tr><th id="879">879</th><td><u>#<span data-ppcond="861">else</span></u></td></tr>
<tr><th id="880">880</th><td>				fOglVertex.push_back(vertex[edgeCount].x());</td></tr>
<tr><th id="881">881</th><td>        fOglVertex.push_back(vertex[edgeCount].y());</td></tr>
<tr><th id="882">882</th><td>        fOglVertex.push_back(vertex[edgeCount].z());</td></tr>
<tr><th id="883">883</th><td>        </td></tr>
<tr><th id="884">884</th><td>        fOglVertex.push_back(normals[edgeCount].x());</td></tr>
<tr><th id="885">885</th><td>        fOglVertex.push_back(normals[edgeCount].y());</td></tr>
<tr><th id="886">886</th><td>        fOglVertex.push_back(normals[edgeCount].z());</td></tr>
<tr><th id="887">887</th><td></td></tr>
<tr><th id="888">888</th><td><u>#<span data-ppcond="861">endif</span></u></td></tr>
<tr><th id="889">889</th><td>      }</td></tr>
<tr><th id="890">890</th><td><u>#<span data-ppcond="890">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="891">891</th><td>      <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();</td></tr>
<tr><th id="892">892</th><td><u>#<span data-ppcond="890">else</span></u></td></tr>
<tr><th id="893">893</th><td>      glEndVBO();</td></tr>
<tr><th id="894">894</th><td><u>#<span data-ppcond="890">endif</span></u></td></tr>
<tr><th id="895">895</th><td>    <dfn class="lbl" id="74end_of_drawing_through_stencil" data-ref="74end_of_drawing_through_stencil">end_of_drawing_through_stencil</dfn>:</td></tr>
<tr><th id="896">896</th><td></td></tr>
<tr><th id="897">897</th><td>      <i>// and once more to reset the stencil bits...</i></td></tr>
<tr><th id="898">898</th><td>      glStencilFunc (<span class='error' title="use of undeclared identifier &apos;GL_ALWAYS&apos;">GL_ALWAYS</span>, <var>0</var>, <var>1</var>);</td></tr>
<tr><th id="899">899</th><td>      glStencilOp (<span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>, <span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>, <span class='error' title="use of undeclared identifier &apos;GL_INVERT&apos;">GL_INVERT</span>);</td></tr>
<tr><th id="900">900</th><td>      glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);  <i>// to make sure line gets drawn.  </i></td></tr>
<tr><th id="901">901</th><td>      <b>if</b> (<a class="local col2 ref" href="#62isTransparent" title='isTransparent' data-ref="62isTransparent">isTransparent</a>) {</td></tr>
<tr><th id="902">902</th><td>	<i>// Transparent...</i></td></tr>
<tr><th id="903">903</th><td>	glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="904">904</th><td>	glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="905">905</th><td>      } <b>else</b> {</td></tr>
<tr><th id="906">906</th><td>	<i>// Opaque...</i></td></tr>
<tr><th id="907">907</th><td>	<b>if</b> (<a class="local col6 ref" href="#66clipping" title='clipping' data-ref="66clipping">clipping</a>) {</td></tr>
<tr><th id="908">908</th><td>	  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="909">909</th><td>	  glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT_AND_BACK&apos;">GL_FRONT_AND_BACK</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="910">910</th><td>	} <b>else</b> {</td></tr>
<tr><th id="911">911</th><td>	  glEnable (<span class='error' title="use of undeclared identifier &apos;GL_CULL_FACE&apos;">GL_CULL_FACE</span>);</td></tr>
<tr><th id="912">912</th><td>	  glCullFace (<span class='error' title="use of undeclared identifier &apos;GL_BACK&apos;">GL_BACK</span>);</td></tr>
<tr><th id="913">913</th><td>	  glPolygonMode (<span class='error' title="use of undeclared identifier &apos;GL_FRONT&apos;">GL_FRONT</span>, <span class='error' title="use of undeclared identifier &apos;GL_LINE&apos;">GL_LINE</span>);</td></tr>
<tr><th id="914">914</th><td>	}</td></tr>
<tr><th id="915">915</th><td>      }</td></tr>
<tr><th id="916">916</th><td>      glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);</td></tr>
<tr><th id="917">917</th><td>      glColor4fv (current_colour);</td></tr>
<tr><th id="918">918</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="919">919</th><td><u>#<span data-ppcond="919">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="920">920</th><td>      glBegin (<span class='error' title="use of undeclared identifier &apos;GL_QUADS&apos;">GL_QUADS</span>);</td></tr>
<tr><th id="921">921</th><td>      glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="922">922</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="923">923</th><td><u>#<span data-ppcond="919">else</span></u></td></tr>
<tr><th id="924">924</th><td>      fEmulate_GL_QUADS = <b>true</b>;</td></tr>
<tr><th id="925">925</th><td>      glBeginVBO(GL_TRIANGLE_STRIP);</td></tr>
<tr><th id="926">926</th><td><u>#<span data-ppcond="919">endif</span></u></td></tr>
<tr><th id="927">927</th><td>      <b>for</b> (<em>int</em> <dfn class="local col6 decl" id="76edgeCount" title='edgeCount' data-type='int' data-ref="76edgeCount">edgeCount</dfn> = <var>0</var>; <a class="local col6 ref" href="#76edgeCount" title='edgeCount' data-ref="76edgeCount">edgeCount</a> &lt; <var>4</var>; ++<a class="local col6 ref" href="#76edgeCount" title='edgeCount' data-ref="76edgeCount">edgeCount</a>) {</td></tr>
<tr><th id="928">928</th><td><u>#<span data-ppcond="928">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="929">929</th><td>        <b>if</b> (<a class="local col9 ref" href="#69edgeFlag" title='edgeFlag' data-ref="69edgeFlag">edgeFlag</a>[<a class="local col6 ref" href="#76edgeCount" title='edgeCount' data-ref="76edgeCount">edgeCount</a>] &gt; <var>0</var>) {</td></tr>
<tr><th id="930">930</th><td>          <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>true</b>) {</td></tr>
<tr><th id="931">931</th><td>            glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="932">932</th><td>            <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="933">933</th><td>          }</td></tr>
<tr><th id="934">934</th><td>        } <b>else</b> {</td></tr>
<tr><th id="935">935</th><td>          <b>if</b> (<a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> != <b>false</b>) {</td></tr>
<tr><th id="936">936</th><td>            glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_FALSE&apos;">GL_FALSE</span>);</td></tr>
<tr><th id="937">937</th><td>            <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>false</b>;</td></tr>
<tr><th id="938">938</th><td>          }</td></tr>
<tr><th id="939">939</th><td>        }</td></tr>
<tr><th id="940">940</th><td>        <span class='error' title="use of undeclared identifier &apos;glNormal3d&apos;">glNormal3d</span> (normals[edgeCount].x(),</td></tr>
<tr><th id="941">941</th><td>                    normals[edgeCount].y(),</td></tr>
<tr><th id="942">942</th><td>                    normals[edgeCount].z());</td></tr>
<tr><th id="943">943</th><td>        <span class='error' title="use of undeclared identifier &apos;glVertex3d&apos;">glVertex3d</span> (vertex[edgeCount].x(),</td></tr>
<tr><th id="944">944</th><td>                    vertex[edgeCount].y(),</td></tr>
<tr><th id="945">945</th><td>                    vertex[edgeCount].z());</td></tr>
<tr><th id="946">946</th><td><u>#<span data-ppcond="928">else</span></u></td></tr>
<tr><th id="947">947</th><td>				fOglVertex.push_back(vertex[edgeCount].x());</td></tr>
<tr><th id="948">948</th><td>        fOglVertex.push_back(vertex[edgeCount].y());</td></tr>
<tr><th id="949">949</th><td>        fOglVertex.push_back(vertex[edgeCount].z());</td></tr>
<tr><th id="950">950</th><td>        </td></tr>
<tr><th id="951">951</th><td>        fOglVertex.push_back(normals[edgeCount].x());</td></tr>
<tr><th id="952">952</th><td>        fOglVertex.push_back(normals[edgeCount].y());</td></tr>
<tr><th id="953">953</th><td>        fOglVertex.push_back(normals[edgeCount].z());</td></tr>
<tr><th id="954">954</th><td></td></tr>
<tr><th id="955">955</th><td><u>#<span data-ppcond="928">endif</span></u></td></tr>
<tr><th id="956">956</th><td>      }</td></tr>
<tr><th id="957">957</th><td><u>#<span data-ppcond="957">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="958">958</th><td>      <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();</td></tr>
<tr><th id="959">959</th><td><u>#<span data-ppcond="957">else</span></u></td></tr>
<tr><th id="960">960</th><td>      glEndVBO();</td></tr>
<tr><th id="961">961</th><td><u>#<span data-ppcond="957">endif</span></u></td></tr>
<tr><th id="962">962</th><td></td></tr>
<tr><th id="963">963</th><td>      glDepthFunc (<span class='error' title="use of undeclared identifier &apos;GL_LEQUAL&apos;">GL_LEQUAL</span>);   <i>// Revert for next facet.</i></td></tr>
<tr><th id="964">964</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="965">965</th><td><u>#<span data-ppcond="965">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="966">966</th><td>      glBegin (<span class='error' title="use of undeclared identifier &apos;GL_QUADS&apos;">GL_QUADS</span>);      <i>// Ready for next facet.  GL</i></td></tr>
<tr><th id="967">967</th><td>      glEdgeFlag (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);</td></tr>
<tr><th id="968">968</th><td>      <a class="member" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler::fEdgeFlag" title='G4OpenGLSceneHandler::fEdgeFlag' data-ref="G4OpenGLSceneHandler::fEdgeFlag">fEdgeFlag</a> = <b>true</b>;</td></tr>
<tr><th id="969">969</th><td>      <i>// says it ignores incomplete</i></td></tr>
<tr><th id="970">970</th><td><i>      // quadrilaterals, so final empty</i></td></tr>
<tr><th id="971">971</th><td><i>      // glBegin/End sequence should be OK.</i></td></tr>
<tr><th id="972">972</th><td><u>#<span data-ppcond="965">else</span></u></td></tr>
<tr><th id="973">973</th><td>      fEmulate_GL_QUADS = <b>true</b>;</td></tr>
<tr><th id="974">974</th><td>      glBeginVBO(GL_TRIANGLE_STRIP);</td></tr>
<tr><th id="975">975</th><td><u>#<span data-ppcond="965">endif</span></u></td></tr>
<tr><th id="976">976</th><td>    }</td></tr>
<tr><th id="977">977</th><td>  } <b>while</b> (<a class="local col7 ref" href="#67notLastFace" title='notLastFace' data-ref="67notLastFace">notLastFace</a>);  </td></tr>
<tr><th id="978">978</th><td>  </td></tr>
<tr><th id="979">979</th><td><u>#<span data-ppcond="979">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="980">980</th><td>  <span class='error' title="use of undeclared identifier &apos;glEnd&apos;">glEnd</span> ();</td></tr>
<tr><th id="981">981</th><td><u>#<span data-ppcond="979">else</span></u></td></tr>
<tr><th id="982">982</th><td>	</td></tr>
<tr><th id="983">983</th><td><i>// FIXME: du grand n'importe quoi en test</i></td></tr>
<tr><th id="984">984</th><td><i>// Cube optimization</i></td></tr>
<tr><th id="985">985</th><td><i>  </i></td></tr>
<tr><th id="986">986</th><td><i>  // store old DrawType because in case of optimization it could be changed</i></td></tr>
<tr><th id="987">987</th><td>  GLenum oldDrawArrayType = fDrawArrayType;</td></tr>
<tr><th id="988">988</th><td></td></tr>
<tr><th id="989">989</th><td>  <b>if</b> (<b>dynamic_cast</b>&lt;<em>const</em> G4PolyhedronTrd2*&gt;(&amp;polyhedron)) {</td></tr>
<tr><th id="990">990</th><td><i>//    OptimizeVBOForTrd();</i></td></tr>
<tr><th id="991">991</th><td>  } <b>else</b> <b>if</b> (<b>dynamic_cast</b>&lt;<em>const</em> G4PolyhedronCons*&gt;(&amp;polyhedron)) {</td></tr>
<tr><th id="992">992</th><td><i>//    OptimizeVBOForCons((polyhedron.GetNoVertices()-2)/2 ); // top + bottom + all faces</i></td></tr>
<tr><th id="993">993</th><td>  }</td></tr>
<tr><th id="994">994</th><td></td></tr>
<tr><th id="995">995</th><td>  glEndVBO();</td></tr>
<tr><th id="996">996</th><td>  fDrawArrayType = oldDrawArrayType;</td></tr>
<tr><th id="997">997</th><td><u>#<span data-ppcond="979">endif</span></u></td></tr>
<tr><th id="998">998</th><td>  </td></tr>
<tr><th id="999">999</th><td>  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_STENCIL_TEST&apos;">GL_STENCIL_TEST</span>);  <i>// Revert to default for next primitive.</i></td></tr>
<tr><th id="1000">1000</th><td>  glDepthMask (<span class='error' title="use of undeclared identifier &apos;GL_TRUE&apos;">GL_TRUE</span>);        <i>// Revert to default for next primitive.</i></td></tr>
<tr><th id="1001">1001</th><td><u>#<span data-ppcond="1001">ifndef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="1002">1002</th><td>  glDisable (<span class='error' title="use of undeclared identifier &apos;GL_LIGHTING&apos;">GL_LIGHTING</span>);      <i>// Revert to default for next primitive.</i></td></tr>
<tr><th id="1003">1003</th><td><u>#<span data-ppcond="1001">endif</span></u></td></tr>
<tr><th id="1004">1004</th><td>}</td></tr>
<tr><th id="1005">1005</th><td></td></tr>
<tr><th id="1006">1006</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11AddCompoundERK13G4VTrajectory" title='G4OpenGLSceneHandler::AddCompound' data-ref="_ZN20G4OpenGLSceneHandler11AddCompoundERK13G4VTrajectory">AddCompound</dfn>(<em>const</em> <a class="type" href="../../../tracking/include/G4VTrajectory.hh.html#G4VTrajectory" title='G4VTrajectory' data-ref="G4VTrajectory">G4VTrajectory</a>&amp; <dfn class="local col7 decl" id="77traj" title='traj' data-type='const G4VTrajectory &amp;' data-ref="77traj">traj</dfn>) {</td></tr>
<tr><th id="1007">1007</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddCompound&apos;">AddCompound</span>(traj);  <i>// For now.</i></td></tr>
<tr><th id="1008">1008</th><td>}</td></tr>
<tr><th id="1009">1009</th><td></td></tr>
<tr><th id="1010">1010</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11AddCompoundERK6G4VHit" title='G4OpenGLSceneHandler::AddCompound' data-ref="_ZN20G4OpenGLSceneHandler11AddCompoundERK6G4VHit">AddCompound</dfn>(<em>const</em> <a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4VHit" title='G4VHit' data-ref="G4VHit">G4VHit</a>&amp; <dfn class="local col8 decl" id="78hit" title='hit' data-type='const G4VHit &amp;' data-ref="78hit">hit</dfn>) {</td></tr>
<tr><th id="1011">1011</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddCompound&apos;">AddCompound</span>(hit);  <i>// For now.</i></td></tr>
<tr><th id="1012">1012</th><td>}</td></tr>
<tr><th id="1013">1013</th><td></td></tr>
<tr><th id="1014">1014</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11AddCompoundERK7G4VDigi" title='G4OpenGLSceneHandler::AddCompound' data-ref="_ZN20G4OpenGLSceneHandler11AddCompoundERK7G4VDigi">AddCompound</dfn>(<em>const</em> <a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4VDigi" title='G4VDigi' data-ref="G4VDigi">G4VDigi</a>&amp; <dfn class="local col9 decl" id="79digi" title='digi' data-type='const G4VDigi &amp;' data-ref="79digi">digi</dfn>) {</td></tr>
<tr><th id="1015">1015</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddCompound&apos;">AddCompound</span>(digi);  <i>// For now.</i></td></tr>
<tr><th id="1016">1016</th><td>}</td></tr>
<tr><th id="1017">1017</th><td></td></tr>
<tr><th id="1018">1018</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11AddCompoundERK10G4THitsMapIdE" title='G4OpenGLSceneHandler::AddCompound' data-ref="_ZN20G4OpenGLSceneHandler11AddCompoundERK10G4THitsMapIdE">AddCompound</dfn>(<em>const</em> <a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4THitsMap" title='G4THitsMap' data-ref="G4THitsMap">G4THitsMap</a>&lt;<a class="typedef" href="../../../global/management/include/G4Types.hh.html#G4double" title='G4double' data-type='double' data-ref="G4double">G4double</a>&gt;&amp; <dfn class="local col0 decl" id="80hits" title='hits' data-type='const G4THitsMap&lt;G4double&gt; &amp;' data-ref="80hits">hits</dfn>) {</td></tr>
<tr><th id="1019">1019</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddCompound&apos;">AddCompound</span>(hits);  <i>// For now.</i></td></tr>
<tr><th id="1020">1020</th><td>}</td></tr>
<tr><th id="1021">1021</th><td></td></tr>
<tr><th id="1022">1022</th><td><em>void</em> <a class="type" href="../include/G4OpenGLSceneHandler.hh.html#G4OpenGLSceneHandler" title='G4OpenGLSceneHandler' data-ref="G4OpenGLSceneHandler">G4OpenGLSceneHandler</a>::<dfn class="virtual decl def" id="_ZN20G4OpenGLSceneHandler11AddCompoundERK10G4THitsMapI12G4StatDoubleE" title='G4OpenGLSceneHandler::AddCompound' data-ref="_ZN20G4OpenGLSceneHandler11AddCompoundERK10G4THitsMapI12G4StatDoubleE">AddCompound</dfn>(<em>const</em> <a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4THitsMap" title='G4THitsMap' data-ref="G4THitsMap">G4THitsMap</a>&lt;<a class="type" href="../../../graphics_reps/include/G4VGraphicsScene.hh.html#G4StatDouble" title='G4StatDouble' data-ref="G4StatDouble">G4StatDouble</a>&gt;&amp; <dfn class="local col1 decl" id="81hits" title='hits' data-type='const G4THitsMap&lt;G4StatDouble&gt; &amp;' data-ref="81hits">hits</dfn>) {</td></tr>
<tr><th id="1023">1023</th><td>  G4VSceneHandler::<span class='error' title="no matching member function for call to &apos;AddCompound&apos;">AddCompound</span>(hits);  <i>// For now.</i></td></tr>
<tr><th id="1024">1024</th><td>}</td></tr>
<tr><th id="1025">1025</th><td></td></tr>
<tr><th id="1026">1026</th><td></td></tr>
<tr><th id="1027">1027</th><td><u>#<span data-ppcond="1027">ifdef</span> <span class="macro" data-ref="_M/G4OPENGL_VERSION_2">G4OPENGL_VERSION_2</span></u></td></tr>
<tr><th id="1028">1028</th><td></td></tr>
<tr><th id="1029">1029</th><td><i>// Optimize vertex and indices in order to render less vertex in OpenGL VBO/IBO</i></td></tr>
<tr><th id="1030">1030</th><td><em>void</em> G4OpenGLSceneHandler::OptimizeVBOForTrd(){</td></tr>
<tr><th id="1031">1031</th><td>  </td></tr>
<tr><th id="1032">1032</th><td>  <i>/* HOW IT IS BUILD (as we receive it from fOglVertex : </i></td></tr>
<tr><th id="1033">1033</th><td><i>   */</i></td></tr>
<tr><th id="1034">1034</th><td></td></tr>
<tr><th id="1035">1035</th><td>   std::vector&lt;<em>double</em>&gt; vertices;</td></tr>
<tr><th id="1036">1036</th><td>  vertices.insert (vertices.end(),fOglVertex.begin(),fOglVertex.begin()+<var>6</var>*<var>6</var>); <i>// ABCDEF</i></td></tr>
<tr><th id="1037">1037</th><td>  vertices.insert (vertices.end(),fOglVertex.begin()+<var>9</var>*<var>6</var>,fOglVertex.begin()+<var>9</var>*<var>6</var>+<var>6</var>); <i>// G</i></td></tr>
<tr><th id="1038">1038</th><td>  vertices.insert (vertices.end(),fOglVertex.begin()+<var>13</var>*<var>6</var>,fOglVertex.begin()+<var>13</var>*<var>6</var>+<var>6</var>); <i>// H</i></td></tr>
<tr><th id="1039">1039</th><td>  fOglVertex = vertices;</td></tr>
<tr><th id="1040">1040</th><td>  </td></tr>
<tr><th id="1041">1041</th><td>  <em>int</em> myarray [] = {</td></tr>
<tr><th id="1042">1042</th><td>    <var>3</var>,<var>2</var>,<var>0</var>,<var>1</var>,<var>4</var>,<var>5</var>,<var>7</var>,<var>6</var>, <var>6</var>,<var>0</var>,<var>4</var>,<var>3</var>,<var>7</var>,<var>2</var>,<var>6</var>,<var>1</var>,<var>5</var></td></tr>
<tr><th id="1043">1043</th><td>  };</td></tr>
<tr><th id="1044">1044</th><td>  fOglIndices.insert(fOglIndices.begin(), myarray, myarray+<var>17</var><i>/*36*/</i>);</td></tr>
<tr><th id="1045">1045</th><td></td></tr>
<tr><th id="1046">1046</th><td>  fDrawArrayType = GL_TRIANGLE_STRIP;</td></tr>
<tr><th id="1047">1047</th><td>}</td></tr>
<tr><th id="1048">1048</th><td></td></tr>
<tr><th id="1049">1049</th><td><i>// Optimize vertex and indices in order to render less vertex in OpenGL VBO/IBO</i></td></tr>
<tr><th id="1050">1050</th><td><em>void</em> G4OpenGLSceneHandler::OptimizeVBOForCons(G4int aNoFaces){</td></tr>
<tr><th id="1051">1051</th><td>  <i>// Optimized, 1st level : 10f/15sec with 1000 cones</i></td></tr>
<tr><th id="1052">1052</th><td><i>  //    DrawElements:208 vertex and 605 (2*100+2*100+2*100+5) indices for a 100 face cone</i></td></tr>
<tr><th id="1053">1053</th><td></td></tr>
<tr><th id="1054">1054</th><td>  <i>/* surface of polycone : could be optimized</i></td></tr>
<tr><th id="1055">1055</th><td><i>   for 100 faces : </i></td></tr>
<tr><th id="1056">1056</th><td><i>   - 100*4 = 400 points</i></td></tr>
<tr><th id="1057">1057</th><td><i>   - 100*2+2 = 202 points with TRIANGLE_STRIP</i></td></tr>
<tr><th id="1058">1058</th><td><i>   Total :</i></td></tr>
<tr><th id="1059">1059</th><td><i>     n*4+n*4+n*4 = n*12</i></td></tr>
<tr><th id="1060">1060</th><td><i>    optimize : n*2+2+1+n+1 = n*3+3 (factor 4)</i></td></tr>
<tr><th id="1061">1061</th><td><i>    but could do better : n faces should give = n*2+2</i></td></tr>
<tr><th id="1062">1062</th><td><i>   */</i></td></tr>
<tr><th id="1063">1063</th><td>  </td></tr>
<tr><th id="1064">1064</th><td>  <i>/*</i></td></tr>
<tr><th id="1065">1065</th><td><i>         0</i></td></tr>
<tr><th id="1066">1066</th><td><i>        / \</i></td></tr>
<tr><th id="1067">1067</th><td><i>       2---4   6 ....2</i></td></tr>
<tr><th id="1068">1068</th><td><i>       |   |</i></td></tr>
<tr><th id="1069">1069</th><td><i>       3---5   7 ....3</i></td></tr>
<tr><th id="1070">1070</th><td><i>        \ /</i></td></tr>
<tr><th id="1071">1071</th><td><i>         1</i></td></tr>
<tr><th id="1072">1072</th><td><i>   */</i></td></tr>
<tr><th id="1073">1073</th><td><i>  // First, faces</i></td></tr>
<tr><th id="1074">1074</th><td>  std::vector&lt;<em>double</em>&gt; vertices;</td></tr>
<tr><th id="1075">1075</th><td></td></tr>
<tr><th id="1076">1076</th><td>  <i>// Add bottom and top vertex</i></td></tr>
<tr><th id="1077">1077</th><td><i>  // aNoFaces*4*6+6 : nb Faces * 4 points per face * 6 vertex by point + 1 point offset</i></td></tr>
<tr><th id="1078">1078</th><td>  vertices.insert (vertices.end(),fOglVertex.begin()+ (aNoFaces*<var>4</var>)*<var>6</var>,fOglVertex.begin()+(aNoFaces*<var>4</var>)*<var>6</var>+<var>6</var>); <i>// 0</i></td></tr>
<tr><th id="1079">1079</th><td>  vertices.insert (vertices.end(),fOglVertex.begin()+ (aNoFaces*<var>8</var>+<var>1</var>)*<var>6</var>,fOglVertex.begin()+(aNoFaces*<var>8</var>+<var>1</var>)*<var>6</var>+<var>6</var>); <i>// 1</i></td></tr>
<tr><th id="1080">1080</th><td>  </td></tr>
<tr><th id="1081">1081</th><td>  <i>// Add facets points</i></td></tr>
<tr><th id="1082">1082</th><td>  G4int posInVertice;</td></tr>
<tr><th id="1083">1083</th><td>  <b>for</b> (G4int a = <var>0</var>; a&lt;aNoFaces; a++) {</td></tr>
<tr><th id="1084">1084</th><td>    posInVertice = a*<var>4</var>*<var>6</var>;</td></tr>
<tr><th id="1085">1085</th><td>    vertices.insert (vertices.end(),fOglVertex.begin()+posInVertice,fOglVertex.begin()+posInVertice+<var>1</var>*<var>6</var>+<var>6</var>); <i>// AB</i></td></tr>
<tr><th id="1086">1086</th><td>  }</td></tr>
<tr><th id="1087">1087</th><td>  vertices.insert (vertices.end(),fOglVertex.begin(),fOglVertex.begin()+<var>1</var>*<var>6</var>*<var>6</var>); <i>// AB</i></td></tr>
<tr><th id="1088">1088</th><td>  fOglVertex = vertices;</td></tr>
<tr><th id="1089">1089</th><td></td></tr>
<tr><th id="1090">1090</th><td>  <i>// Add indices for top :</i></td></tr>
<tr><th id="1091">1091</th><td><i>  // simple version :    0-2-0-4-0-6-0-8-0-10..</i></td></tr>
<tr><th id="1092">1092</th><td><i>  // optimized version : 2-0-4-6- 6-0-8-10.. but we have to deal with odd faces numbers</i></td></tr>
<tr><th id="1093">1093</th><td>  <b>for</b> (G4int a=<var>0</var>; a&lt;aNoFaces; a++) {</td></tr>
<tr><th id="1094">1094</th><td>    fOglIndices.push_back(<var>0</var>);</td></tr>
<tr><th id="1095">1095</th><td>    fOglIndices.push_back(a*<var>2</var>+<var>2</var>);</td></tr>
<tr><th id="1096">1096</th><td>  }</td></tr>
<tr><th id="1097">1097</th><td>  <i>// close strip</i></td></tr>
<tr><th id="1098">1098</th><td>  fOglIndices.push_back(<var>0</var>);</td></tr>
<tr><th id="1099">1099</th><td>  fOglIndices.push_back(<var>2</var>);</td></tr>
<tr><th id="1100">1100</th><td></td></tr>
<tr><th id="1101">1101</th><td>  <i>// Add indices for faces</i></td></tr>
<tr><th id="1102">1102</th><td>  <b>for</b> (G4int a = <var>0</var>; a&lt;aNoFaces; a++) {</td></tr>
<tr><th id="1103">1103</th><td>    fOglIndices.push_back(a*<var>2</var>+<var>2</var>);</td></tr>
<tr><th id="1104">1104</th><td>    fOglIndices.push_back(a*<var>2</var>+<var>1</var>+<var>2</var>);</td></tr>
<tr><th id="1105">1105</th><td>  }</td></tr>
<tr><th id="1106">1106</th><td>  fOglIndices.push_back(<var>2</var>);</td></tr>
<tr><th id="1107">1107</th><td>  fOglIndices.push_back(<var>2</var>+<var>1</var>);</td></tr>
<tr><th id="1108">1108</th><td>  </td></tr>
<tr><th id="1109">1109</th><td>  <i>// Second : top</i></td></tr>
<tr><th id="1110">1110</th><td><i>  // 3-1-5-1-7-1-9-1..</i></td></tr>
<tr><th id="1111">1111</th><td>  <b>for</b> (G4int a=<var>0</var>; a&lt;aNoFaces; a++) {</td></tr>
<tr><th id="1112">1112</th><td>    fOglIndices.push_back(a*<var>2</var>+<var>3</var>);</td></tr>
<tr><th id="1113">1113</th><td>    fOglIndices.push_back(<var>1</var>);</td></tr>
<tr><th id="1114">1114</th><td>  }</td></tr>
<tr><th id="1115">1115</th><td>  <i>// close strip</i></td></tr>
<tr><th id="1116">1116</th><td>  fOglIndices.push_back(<var>0</var>+<var>3</var>);</td></tr>
<tr><th id="1117">1117</th><td>  </td></tr>
<tr><th id="1118">1118</th><td>  fDrawArrayType = GL_TRIANGLE_STRIP;</td></tr>
<tr><th id="1119">1119</th><td>  fEmulate_GL_QUADS = <b>false</b>;</td></tr>
<tr><th id="1120">1120</th><td>}</td></tr>
<tr><th id="1121">1121</th><td></td></tr>
<tr><th id="1122">1122</th><td><em>void</em> G4OpenGLSceneHandler::glBeginVBO(GLenum type)  {</td></tr>
<tr><th id="1123">1123</th><td>  fDrawArrayType = type;</td></tr>
<tr><th id="1124">1124</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1125">1125</th><td>  glGenBuffers(<var>1</var>,&amp;fVertexBufferObject);</td></tr>
<tr><th id="1126">1126</th><td>  glGenBuffers(<var>1</var>,&amp;fIndicesBufferObject);</td></tr>
<tr><th id="1127">1127</th><td><u>#else</u></td></tr>
<tr><th id="1128">1128</th><td>  fVertexBufferObject = glCreateBuffer(); <i>//glGenBuffer(1,fVertexBufferObject_2)</i></td></tr>
<tr><th id="1129">1129</th><td>  fIndicesBufferObject = glCreateBuffer(); <i>//glGenBuffer(1,fIndicesBufferObject_2)</i></td></tr>
<tr><th id="1130">1130</th><td><u>#endif</u></td></tr>
<tr><th id="1131">1131</th><td></td></tr>
<tr><th id="1132">1132</th><td>  <i>// clear data and indices for OpenGL</i></td></tr>
<tr><th id="1133">1133</th><td>  fOglVertex.clear();</td></tr>
<tr><th id="1134">1134</th><td>  fOglIndices.clear();</td></tr>
<tr><th id="1135">1135</th><td>}</td></tr>
<tr><th id="1136">1136</th><td></td></tr>
<tr><th id="1137">1137</th><td><i>// 2 cases :</i></td></tr>
<tr><th id="1138">1138</th><td><i>/*</i></td></tr>
<tr><th id="1139">1139</th><td><i> glDrawArray : if there is no vertex indices : fOglIndices.size() == 0</i></td></tr>
<tr><th id="1140">1140</th><td><i> glDrawElements : if there is vertex indices : fOglIndices.size() != 0</i></td></tr>
<tr><th id="1141">1141</th><td><i> </i></td></tr>
<tr><th id="1142">1142</th><td><i> */</i></td></tr>
<tr><th id="1143">1143</th><td><em>void</em> G4OpenGLSceneHandler::glEndVBO()  {</td></tr>
<tr><th id="1144">1144</th><td>  <b>if</b> (fOglIndices.size() == <var>0</var>) {</td></tr>
<tr><th id="1145">1145</th><td></td></tr>
<tr><th id="1146">1146</th><td></td></tr>
<tr><th id="1147">1147</th><td>    std::vector&lt;<em>double</em>&gt; vertices;</td></tr>
<tr><th id="1148">1148</th><td>    <i>// check if it is a GL_QUADS emulation</i></td></tr>
<tr><th id="1149">1149</th><td>    <b>if</b> (fEmulate_GL_QUADS == <b>true</b>) {</td></tr>
<tr><th id="1150">1150</th><td>      fEmulate_GL_QUADS = <b>false</b>;</td></tr>
<tr><th id="1151">1151</th><td>      <i>// A point has 6 double : Vx Vy Vz Nx Ny Nz</i></td></tr>
<tr><th id="1152">1152</th><td><i>      // A QUAD should be like this</i></td></tr>
<tr><th id="1153">1153</th><td>      <i>/*</i></td></tr>
<tr><th id="1154">1154</th><td><i>           0   3/4  7/8   ..</i></td></tr>
<tr><th id="1155">1155</th><td><i>       </i></td></tr>
<tr><th id="1156">1156</th><td><i>           1   2/5  6/9   ..</i></td></tr>
<tr><th id="1157">1157</th><td><i>       */</i></td></tr>
<tr><th id="1158">1158</th><td><i>      // And if 3==4 and 2==5, we should do it like this for a TRIANGLES_STRIP</i></td></tr>
<tr><th id="1159">1159</th><td>      <i>/*</i></td></tr>
<tr><th id="1160">1160</th><td><i>       0   4   8   ..</i></td></tr>
<tr><th id="1161">1161</th><td><i>       | / | / |</i></td></tr>
<tr><th id="1162">1162</th><td><i>       1   5   9   ..</i></td></tr>
<tr><th id="1163">1163</th><td><i>       // Optimized, 1st level : 24f/15sec with 10 cones</i></td></tr>
<tr><th id="1164">1164</th><td><i>       // non Optimized, 1st level : 12f/15sec with 10 cones</i></td></tr>
<tr><th id="1165">1165</th><td><i>       */</i></td></tr>
<tr><th id="1166">1166</th><td><i>      // should be 4 points</i></td></tr>
<tr><th id="1167">1167</th><td>      <b>for</b> (<em>unsigned</em> <em>int</em> a=<var>0</var>; a&lt;fOglVertex.size(); a+=<var>6</var>*<var>4</var>) {</td></tr>
<tr><th id="1168">1168</th><td>        vertices.insert (vertices.end(),fOglVertex.begin()+a,fOglVertex.begin()+a+<var>1</var>*<var>6</var>+<var>6</var>); <i>// 0-1</i></td></tr>
<tr><th id="1169">1169</th><td>        <i>// if 2-3 == 4-5, do not add them</i></td></tr>
<tr><th id="1170">1170</th><td><i>        // if differents, we are obliged to create a new GL_TRIANGLE_STRIP</i></td></tr>
<tr><th id="1171">1171</th><td>        <b>if</b> (a+<var>4</var>*<var>6</var>+<var>5</var> &lt; fOglVertex.size()) {</td></tr>
<tr><th id="1172">1172</th><td>          <b>if</b> ((fOglVertex[a+<var>2</var>*<var>6</var>+<var>0</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>0</var>]) || <i>//Vx for 2 and 5</i></td></tr>
<tr><th id="1173">1173</th><td>              (fOglVertex[a+<var>2</var>*<var>6</var>+<var>1</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>1</var>]) || <i>//Vy for 2 and 5</i></td></tr>
<tr><th id="1174">1174</th><td>              (fOglVertex[a+<var>2</var>*<var>6</var>+<var>2</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>2</var>]) || <i>//Vz for 2 and 5</i></td></tr>
<tr><th id="1175">1175</th><td>              (fOglVertex[a+<var>2</var>*<var>6</var>+<var>3</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>3</var>]) || <i>//Px for 2 and 5</i></td></tr>
<tr><th id="1176">1176</th><td>              (fOglVertex[a+<var>2</var>*<var>6</var>+<var>4</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>4</var>]) || <i>//Py for 2 and 5</i></td></tr>
<tr><th id="1177">1177</th><td>              (fOglVertex[a+<var>2</var>*<var>6</var>+<var>5</var>] != fOglVertex[a+<var>5</var>*<var>6</var>+<var>5</var>]) || <i>//Pz for 2 and 5</i></td></tr>
<tr><th id="1178">1178</th><td>              </td></tr>
<tr><th id="1179">1179</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>0</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>0</var>]) || <i>//Vx for 3 and 4</i></td></tr>
<tr><th id="1180">1180</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>1</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>1</var>]) || <i>//Vy for 3 and 4</i></td></tr>
<tr><th id="1181">1181</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>2</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>2</var>]) || <i>//Vz for 3 and 4</i></td></tr>
<tr><th id="1182">1182</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>3</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>3</var>]) || <i>//Px for 3 and 4</i></td></tr>
<tr><th id="1183">1183</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>4</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>4</var>]) || <i>//Py for 3 and 4</i></td></tr>
<tr><th id="1184">1184</th><td>              (fOglVertex[a+<var>3</var>*<var>6</var>+<var>5</var>] != fOglVertex[a+<var>4</var>*<var>6</var>+<var>5</var>])) { <i>//Pz for 3 and 4</i></td></tr>
<tr><th id="1185">1185</th><td>            <i>// add last points</i></td></tr>
<tr><th id="1186">1186</th><td>            vertices.insert (vertices.end(),fOglVertex.begin()+a+<var>3</var>*<var>6</var>,fOglVertex.begin()+a+<var>3</var>*<var>6</var>+<var>6</var>); <i>// 3</i></td></tr>
<tr><th id="1187">1187</th><td>            vertices.insert (vertices.end(),fOglVertex.begin()+a+<var>2</var>*<var>6</var>,fOglVertex.begin()+a+<var>2</var>*<var>6</var>+<var>6</var>); <i>// 2</i></td></tr>
<tr><th id="1188">1188</th><td>            <i>// build and send the GL_TRIANGLE_STRIP</i></td></tr>
<tr><th id="1189">1189</th><td>            drawVBOArray(vertices);</td></tr>
<tr><th id="1190">1190</th><td>            vertices.clear();</td></tr>
<tr><th id="1191">1191</th><td>          }</td></tr>
<tr><th id="1192">1192</th><td>        } <b>else</b> { <i>// end of volume</i></td></tr>
<tr><th id="1193">1193</th><td>          vertices.insert (vertices.end(),fOglVertex.begin()+a+<var>3</var>*<var>6</var>,fOglVertex.begin()+a+<var>3</var>*<var>6</var>+<var>6</var>); <i>// 3</i></td></tr>
<tr><th id="1194">1194</th><td>          vertices.insert (vertices.end(),fOglVertex.begin()+a+<var>2</var>*<var>6</var>,fOglVertex.begin()+a+<var>2</var>*<var>6</var>+<var>6</var>); <i>// 2</i></td></tr>
<tr><th id="1195">1195</th><td>        }</td></tr>
<tr><th id="1196">1196</th><td>      }</td></tr>
<tr><th id="1197">1197</th><td>      fOglVertex = vertices;</td></tr>
<tr><th id="1198">1198</th><td>    }</td></tr>
<tr><th id="1199">1199</th><td></td></tr>
<tr><th id="1200">1200</th><td>    drawVBOArray(fOglVertex);</td></tr>
<tr><th id="1201">1201</th><td></td></tr>
<tr><th id="1202">1202</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1203">1203</th><td>  </td></tr>
<tr><th id="1204">1204</th><td>    <i>// Bind VBO</i></td></tr>
<tr><th id="1205">1205</th><td>    glBindBuffer(GL_ARRAY_BUFFER, fVertexBufferObject);</td></tr>
<tr><th id="1206">1206</th><td>    </td></tr>
<tr><th id="1207">1207</th><td>    <i>// Load fOglVertex into VBO</i></td></tr>
<tr><th id="1208">1208</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1209">1209</th><td>    <em>int</em> sizeV = fOglVertex.size();</td></tr>
<tr><th id="1210">1210</th><td>    <i>// FIXME : perhaps a problem withBufferData in OpenGL other than WebGL ?</i></td></tr>
<tr><th id="1211">1211</th><td><i>//    void glBufferData(	GLenum target, GLsizeiptr size, const GLvoid * data, GLenum usage);</i></td></tr>
<tr><th id="1212">1212</th><td>    glBufferData(GL_ARRAY_BUFFER, <b>sizeof</b>(<em>double</em>)*sizeV, &amp;fOglVertex[<var>0</var>], GL_STATIC_DRAW);</td></tr>
<tr><th id="1213">1213</th><td><u>#else</u></td></tr>
<tr><th id="1214">1214</th><td>    glBufferDatafv(GL_ARRAY_BUFFER, fOglVertex.begin(), fOglVertex.end(), GL_STATIC_DRAW);</td></tr>
<tr><th id="1215">1215</th><td><u>#endif</u></td></tr>
<tr><th id="1216">1216</th><td>    </td></tr>
<tr><th id="1217">1217</th><td>    <i>// Bind IBO</i></td></tr>
<tr><th id="1218">1218</th><td>    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, fIndicesBufferObject);</td></tr>
<tr><th id="1219">1219</th><td>    </td></tr>
<tr><th id="1220">1220</th><td>    <i>// Load fOglVertex into VBO</i></td></tr>
<tr><th id="1221">1221</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1222">1222</th><td>    <em>int</em> sizeI = fOglIndices.size();</td></tr>
<tr><th id="1223">1223</th><td>    glBufferData(GL_ELEMENT_ARRAY_BUFFER,<b>sizeof</b>(<em>int</em>)*sizeI, &amp;fOglIndices[<var>0</var>], GL_STATIC_DRAW);</td></tr>
<tr><th id="1224">1224</th><td><u>#else</u></td></tr>
<tr><th id="1225">1225</th><td>    glBufferDataiv(GL_ELEMENT_ARRAY_BUFFER, fOglIndices.begin(), fOglIndices.end(), GL_STATIC_DRAW, GL_UNSIGNED_BYTE);</td></tr>
<tr><th id="1226">1226</th><td><u>#endif</u></td></tr>
<tr><th id="1227">1227</th><td>    </td></tr>
<tr><th id="1228">1228</th><td>    <i>//----------------------------</i></td></tr>
<tr><th id="1229">1229</th><td><i>    // Draw VBO</i></td></tr>
<tr><th id="1230">1230</th><td><i>    //----------------------------</i></td></tr>
<tr><th id="1231">1231</th><td>    glBindBuffer(GL_ARRAY_BUFFER, fVertexBufferObject);</td></tr>
<tr><th id="1232">1232</th><td>    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, fIndicesBufferObject);</td></tr>
<tr><th id="1233">1233</th><td>        </td></tr>
<tr><th id="1234">1234</th><td>    <i>// the fVertexPositionAttribute is inside the G4OpenGLViewer</i></td></tr>
<tr><th id="1235">1235</th><td>    G4OpenGLViewer* pGLViewer = <b>dynamic_cast</b>&lt;G4OpenGLViewer*&gt;(fpViewer);</td></tr>
<tr><th id="1236">1236</th><td>    <b>if</b> (pGLViewer) {</td></tr>
<tr><th id="1237">1237</th><td>      glEnableVertexAttribArray(pGLViewer-&gt;fVertexPositionAttribute);</td></tr>
<tr><th id="1238">1238</th><td></td></tr>
<tr><th id="1239">1239</th><td>      glVertexAttribPointer(pGLViewer-&gt;fVertexPositionAttribute,</td></tr>
<tr><th id="1240">1240</th><td>                            <var>3</var>,     <i>// size: Every vertex has an X, Y anc Z component</i></td></tr>
<tr><th id="1241">1241</th><td>                            GL_FLOAT, <i>// type: They are floats</i></td></tr>
<tr><th id="1242">1242</th><td>                            GL_FALSE, <i>// normalized: Please, do NOT normalize the vertices</i></td></tr>
<tr><th id="1243">1243</th><td>                            <var>2</var>*<var>3</var>*<var>4</var>, <i>// stride: The first byte of the next vertex is located this</i></td></tr>
<tr><th id="1244">1244</th><td>                            <i>//         amount of bytes further. The format of the VBO is</i></td></tr>
<tr><th id="1245">1245</th><td><i>                            //         vx, vy, vz, nx, ny, nz and every element is a</i></td></tr>
<tr><th id="1246">1246</th><td><i>                            //         Float32, hence 4 bytes large</i></td></tr>
<tr><th id="1247">1247</th><td>                            <var>0</var>);    <i>// offset: The byte position of the first vertex in the buffer</i></td></tr>
<tr><th id="1248">1248</th><td>    }</td></tr>
<tr><th id="1249">1249</th><td>    </td></tr>
<tr><th id="1250">1250</th><td>    </td></tr>
<tr><th id="1251">1251</th><td>    glBindBuffer(GL_ARRAY_BUFFER, fVertexBufferObject);</td></tr>
<tr><th id="1252">1252</th><td>    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, fIndicesBufferObject);</td></tr>
<tr><th id="1253">1253</th><td><i>//    glDrawElements(fDrawArrayType, fOglIndices.size(), GL_UNSIGNED_SHORT, 0);</i></td></tr>
<tr><th id="1254">1254</th><td>    glDrawElements(fDrawArrayType, fOglIndices.size(), GL_UNSIGNED_SHORT, <var>0</var>);</td></tr>
<tr><th id="1255">1255</th><td>    </td></tr>
<tr><th id="1256">1256</th><td>    <b>if</b> (pGLViewer) {</td></tr>
<tr><th id="1257">1257</th><td>      glDisableVertexAttribArray(pGLViewer-&gt;fVertexPositionAttribute);</td></tr>
<tr><th id="1258">1258</th><td>    }</td></tr>
<tr><th id="1259">1259</th><td></td></tr>
<tr><th id="1260">1260</th><td>    <i>// delete the buffer</i></td></tr>
<tr><th id="1261">1261</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1262">1262</th><td>    glDeleteBuffers(<var>1</var>,&amp;fVertexBufferObject);</td></tr>
<tr><th id="1263">1263</th><td><u>#else</u></td></tr>
<tr><th id="1264">1264</th><td>    glDeleteBuffer(fVertexBufferObject);</td></tr>
<tr><th id="1265">1265</th><td><u>#endif</u></td></tr>
<tr><th id="1266">1266</th><td>  }</td></tr>
<tr><th id="1267">1267</th><td>}</td></tr>
<tr><th id="1268">1268</th><td>          </td></tr>
<tr><th id="1269">1269</th><td><em>void</em> G4OpenGLSceneHandler::drawVBOArray(std::vector&lt;<em>double</em>&gt; vertices)  {</td></tr>
<tr><th id="1270">1270</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1271">1271</th><td>  glGenBuffers(<var>1</var>,&amp;fVertexBufferObject);</td></tr>
<tr><th id="1272">1272</th><td>  glGenBuffers(<var>1</var>,&amp;fIndicesBufferObject);</td></tr>
<tr><th id="1273">1273</th><td><u>#else</u></td></tr>
<tr><th id="1274">1274</th><td>  fVertexBufferObject = glCreateBuffer(); <i>//glGenBuffer(1,fVertexBufferObject_2)</i></td></tr>
<tr><th id="1275">1275</th><td>  fIndicesBufferObject = glCreateBuffer(); <i>//glGenBuffer(1,fIndicesBufferObject_2)</i></td></tr>
<tr><th id="1276">1276</th><td><u>#endif</u></td></tr>
<tr><th id="1277">1277</th><td></td></tr>
<tr><th id="1278">1278</th><td>  <i>// Bind this buffer</i></td></tr>
<tr><th id="1279">1279</th><td>  glBindBuffer(GL_ARRAY_BUFFER, fVertexBufferObject);</td></tr>
<tr><th id="1280">1280</th><td>  <i>// Load oglData into VBO</i></td></tr>
<tr><th id="1281">1281</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1282">1282</th><td>  <em>int</em> s = vertices.size();</td></tr>
<tr><th id="1283">1283</th><td>  glBufferData(GL_ARRAY_BUFFER, <b>sizeof</b>(<em>double</em>)*s, &amp;vertices[<var>0</var>], GL_STATIC_DRAW);</td></tr>
<tr><th id="1284">1284</th><td><u>#else</u></td></tr>
<tr><th id="1285">1285</th><td>  glBufferDatafv(GL_ARRAY_BUFFER, vertices.begin(), vertices.end(), GL_STATIC_DRAW);</td></tr>
<tr><th id="1286">1286</th><td><u>#endif</u></td></tr>
<tr><th id="1287">1287</th><td>  </td></tr>
<tr><th id="1288">1288</th><td>  <i>//----------------------------</i></td></tr>
<tr><th id="1289">1289</th><td><i>  // Draw VBO</i></td></tr>
<tr><th id="1290">1290</th><td><i>  //----------------------------</i></td></tr>
<tr><th id="1291">1291</th><td>  glBindBuffer(GL_ARRAY_BUFFER, fVertexBufferObject);</td></tr>
<tr><th id="1292">1292</th><td>  </td></tr>
<tr><th id="1293">1293</th><td>  <i>// the fVertexPositionAttribute is inside the G4OpenGLViewer</i></td></tr>
<tr><th id="1294">1294</th><td>  G4OpenGLViewer* pGLViewer = <b>dynamic_cast</b>&lt;G4OpenGLViewer*&gt;(fpViewer);</td></tr>
<tr><th id="1295">1295</th><td>  <b>if</b> (pGLViewer) {</td></tr>
<tr><th id="1296">1296</th><td>    glEnableVertexAttribArray(pGLViewer-&gt;fVertexPositionAttribute);</td></tr>
<tr><th id="1297">1297</th><td></td></tr>
<tr><th id="1298">1298</th><td><i>//    glVertexAttribPointer(GLuint index, GLint size, GLenum type, GLboolean normalized, GLsizei stride, const GLvoid *pointer)</i></td></tr>
<tr><th id="1299">1299</th><td></td></tr>
<tr><th id="1300">1300</th><td><i>/*</i></td></tr>
<tr><th id="1301">1301</th><td><i> GL_DOUBLE</i></td></tr>
<tr><th id="1302">1302</th><td><i> Warning: This section describes legacy OpenGL APIs that have been removed from core OpenGL 3.1 and above (they are only deprecated in OpenGL 3.0). It is recommended that you not use this functionality in your programs.</i></td></tr>
<tr><th id="1303">1303</th><td><i> </i></td></tr>
<tr><th id="1304">1304</th><td><i> glLoadMatrixd, glRotated and any other function that have to do with the double type. Most GPUs don't support GL_DOUBLE (double) so the driver will convert the data to GL_FLOAT (float) and send to the GPU. If you put GL_DOUBLE data in a VBO, the performance might even be much worst than immediate mode (immediate mode means glBegin, glVertex, glEnd). GL doesn't offer any better way to know what the GPU prefers.</i></td></tr>
<tr><th id="1305">1305</th><td><i> */</i></td></tr>
<tr><th id="1306">1306</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1307">1307</th><td>    glVertexAttribPointer(pGLViewer-&gt;fVertexPositionAttribute,</td></tr>
<tr><th id="1308">1308</th><td>                          <var>3</var>,     <i>// size: Every vertex has an X, Y anc Z component</i></td></tr>
<tr><th id="1309">1309</th><td>                          GL_DOUBLE, <i>// type: They are double</i></td></tr>
<tr><th id="1310">1310</th><td>                          GL_FALSE, <i>// normalized: Please, do NOT normalize the vertices</i></td></tr>
<tr><th id="1311">1311</th><td>                          <var>6</var>*<b>sizeof</b>(<em>double</em>), <i>// stride: The first byte of the next vertex is located this</i></td></tr>
<tr><th id="1312">1312</th><td>                          <i>//         amount of bytes further. The format of the VBO is</i></td></tr>
<tr><th id="1313">1313</th><td><i>                          //         vx, vy, vz, nx, ny, nz and every element is a</i></td></tr>
<tr><th id="1314">1314</th><td><i>                          //         Float32, hence 4 bytes large</i></td></tr>
<tr><th id="1315">1315</th><td>                          <var>0</var>);    <i>// offset: The byte position of the first vertex in the buffer</i></td></tr>
<tr><th id="1316">1316</th><td><u>#else</u></td></tr>
<tr><th id="1317">1317</th><td>    glVertexAttribPointer(pGLViewer-&gt;fVertexPositionAttribute,</td></tr>
<tr><th id="1318">1318</th><td>                          <var>3</var>,     <i>// size: Every vertex has an X, Y anc Z component</i></td></tr>
<tr><th id="1319">1319</th><td>                          GL_FLOAT, <i>// type: They are floats</i></td></tr>
<tr><th id="1320">1320</th><td>                          GL_FALSE, <i>// normalized: Please, do NOT normalize the vertices</i></td></tr>
<tr><th id="1321">1321</th><td>                          <var>2</var>*<var>3</var>*<var>4</var>,    <i>// stride: The first byte of the next vertex is located this</i></td></tr>
<tr><th id="1322">1322</th><td>                          <i>//         amount of bytes further. The format of the VBO is</i></td></tr>
<tr><th id="1323">1323</th><td><i>                          //         vx, vy, vz, nx, ny, nz and every element is a</i></td></tr>
<tr><th id="1324">1324</th><td><i>                          //         Float32, hence 4 bytes large</i></td></tr>
<tr><th id="1325">1325</th><td>                          <var>0</var>);    <i>// offset: The byte position of the first vertex in the buffer</i></td></tr>
<tr><th id="1326">1326</th><td><u>#endif</u></td></tr>
<tr><th id="1327">1327</th><td>  }</td></tr>
<tr><th id="1328">1328</th><td>  </td></tr>
<tr><th id="1329">1329</th><td>  glDrawArrays(fDrawArrayType, <i>// GL_POINTS, GL_LINE_STRIP, GL_LINE_LOOP, GL_LINES, GL_TRIANGLE_FAN, GL_TRIANGLE_STRIP, and GL_TRIANGLES</i></td></tr>
<tr><th id="1330">1330</th><td>               <var>0</var>, vertices.size()/<var>6</var>);</td></tr>
<tr><th id="1331">1331</th><td>  <b>if</b> (pGLViewer) {</td></tr>
<tr><th id="1332">1332</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1333">1333</th><td>    glDisableClientState( GL_VERTEX_ARRAY );</td></tr>
<tr><th id="1334">1334</th><td><u>#else</u></td></tr>
<tr><th id="1335">1335</th><td>    glDisableVertexAttribArray(pGLViewer-&gt;fVertexPositionAttribute);</td></tr>
<tr><th id="1336">1336</th><td><u>#endif</u></td></tr>
<tr><th id="1337">1337</th><td>  }</td></tr>
<tr><th id="1338">1338</th><td>  </td></tr>
<tr><th id="1339">1339</th><td>  <i>// delete the buffer</i></td></tr>
<tr><th id="1340">1340</th><td><u>#ifndef G4VIS_BUILD_OPENGLWT_DRIVER</u></td></tr>
<tr><th id="1341">1341</th><td>  glDeleteBuffers(<var>1</var>,&amp;fVertexBufferObject);</td></tr>
<tr><th id="1342">1342</th><td><u>#else</u></td></tr>
<tr><th id="1343">1343</th><td>  glDeleteBuffer(fVertexBufferObject);</td></tr>
<tr><th id="1344">1344</th><td><u>#endif</u></td></tr>
<tr><th id="1345">1345</th><td>}</td></tr>
<tr><th id="1346">1346</th><td><u>#<span data-ppcond="1027">endif</span></u></td></tr>
<tr><th id="1347">1347</th><td></td></tr>
<tr><th id="1348">1348</th><td><u>#<span data-ppcond="34">endif</span></u></td></tr>
<tr><th id="1349">1349</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Aug-28</em> from project codebrowser<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
